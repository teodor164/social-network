(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{130:function(e,t,n){e.exports={message:"Message_message__37xmZ"}},133:function(e,t,n){e.exports={loader:"Preloader_loader__lWjDE"}},135:function(e,t,n){e.exports={userPhoto:"Users_userPhoto__2YoK6",selectedPage:"Users_selectedPage__22Fmw"}},167:function(e,t,n){},168:function(e,t,n){},24:function(e,t,n){e.exports={nav:"Navbar_nav__3Ojas",item:"Navbar_item__2EV0a",activeLink:"Navbar_activeLink__1VQ0J"}},291:function(e,t,n){"use strict";n.r(t);var a=function(e){e&&e instanceof Function&&n.e(4).then(n.bind(null,292)).then((function(t){var n=t.getCLS,a=t.getFID,r=t.getFCP,s=t.getLCP,c=t.getTTFB;n(e),a(e),r(e),s(e),c(e)}))},r=n(1),s=n.n(r),c=n(67),i=n.n(c),o=(n(167),n(27)),u=n(28),l=n(30),d=n(29),j=n(9),p=n(16),f=(n(168),n(43)),b=n(3),h="ADD-MESSAGE",m={messagesData:[{id:1,message:"Hi"},{id:2,message:"How are you?"},{id:3,message:"42"}],dialogsData:[{id:1,name:"Dima",img:"https://meragor.com/files/styles//ava_800_800_wm/standoff_162.jpg"},{id:2,name:"Andrey",img:"https://avatars.mds.yandex.net/get-zen_doc/3512693/pub_5efb3ff066fe1d5006536937_5efb4be4cdd4d637ce0fd2e8/scale_1200"},{id:3,name:"Maxim",img:"https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcTn8H3mqnU943_lgdPtj-JIGRjyKAlp3FSLzg&usqp=CAU"},{id:4,name:"Ghena",img:"https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcSx5wghphVB-NTZeDHzsjPFUGY2_V-yPNnq1g&usqp=CAU"},{id:5,name:"Renat",img:"http://pristor.ru/wp-content/uploads/2019/01/%D0%A8%D0%B8%D0%BA%D0%B0%D1%80%D0%BD%D1%8B%D0%B5-%D0%B0%D0%B2%D0%B0%D1%82%D0%B0%D1%80%D0%BA%D0%B8-%D0%B4%D0%BB%D1%8F-%D0%92%D0%9A%D0%BE%D0%BD%D1%82%D0%B0%D0%BA%D1%82%D0%B5-%D0%B4%D0%B5%D0%B2%D1%83%D1%88%D0%BA%D0%B0%D0%BC-%D0%B8-%D0%B4%D0%B5%D0%B2%D0%BE%D1%87%D0%BA%D0%B0%D0%BC-%D0%BF%D0%BE%D0%B4%D0%B1%D0%BE%D1%80%D0%BA%D0%B0-4.jpg"},{id:6,name:"Sasha",img:"https://cs-love.net/avatars/images/cs-love-avatar-0.jpg"},{id:7,name:"Victor",img:"https://sovietgames.su/wp-content/uploads/2016/07/%D0%90%D0%B2%D0%B0%D1%82%D0%B0%D1%80%D0%BA%D0%B0.jpg"}]},O=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:m,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case h:return Object(b.a)(Object(b.a)({},e),{},{messagesData:[].concat(Object(f.a)(e.messagesData),[{id:1,message:t.newMessageBoddy}])});default:return e}},g=n(56),x=n.n(g),v=n(57),_=n.n(v),P=n(0),D=function(e){return Object(P.jsx)("div",{className:_.a.dialog,children:Object(P.jsx)(p.b,{to:"/dialogs/".concat(e.id),activeClassName:_.a.activeLink,children:Object(P.jsxs)("div",{className:_.a.item,children:[Object(P.jsx)("img",{src:e.img}),Object(P.jsx)("div",{className:_.a.name,children:e.name})]})})})},y=n(130),w=n.n(y),N=function(e){return Object(P.jsx)("div",{className:w.a.message,children:e.message})},B=n(127),S=n(128),I=n(44),k=n(53),C=n.n(k),A=function(e){e.input;var t=e.meta,n=(e.child,Object(I.a)(e,["input","meta","child"])),a=t.error&&t.touched;return Object(P.jsxs)("div",{className:"".concat(C.a.formControl," ").concat(a?C.a.err:""),children:[Object(P.jsx)("div",{children:n.children}),a&&Object(P.jsx)("span",{children:t.error})]})},E=function(e){var t=e.input,n=(e.meta,e.child,Object(I.a)(e,["input","meta","child"]));return Object(P.jsx)(A,Object(b.a)(Object(b.a)({},e),{},{children:Object(P.jsx)("textarea",Object(b.a)(Object(b.a)({},t),n))}))},F=function(e){var t=e.input,n=(e.meta,e.child,Object(I.a)(e,["input","meta","child"]));return Object(P.jsx)(A,Object(b.a)(Object(b.a)({},e),{},{children:Object(P.jsx)("input",Object(b.a)(Object(b.a)({},t),n))}))},U=function(e,t,n,a,r){var s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"",c=arguments.length>6&&void 0!==arguments[6]?arguments[6]:{};return Object(P.jsxs)("div",{children:[Object(P.jsx)(B.a,Object(b.a)({placeholder:e,name:t,component:n,validate:a,type:r},c)),s]})},T=function(e){if(!e)return"Field is required"},L=function(e){return function(t){if(t&&t.length>e)return"Max length is ".concat(e," symbols")}},M=L(100),z=Object(S.a)({form:"dialogAddMessageForm"})((function(e){return Object(P.jsxs)("form",{onSubmit:e.handleSubmit,children:[Object(P.jsx)(B.a,{component:E,name:"newMessageBoddy",validate:[T,M]}),Object(P.jsx)("button",{children:"Send"})]})})),G=function(e){var t=e.dialogsPage.dialogsData.map((function(e){return Object(P.jsx)(D,{id:e.id,name:e.name,img:e.img},e.id)})),n=e.dialogsPage.messagesData.map((function(e){return Object(P.jsx)(N,{message:e.message},e.id)}));return Object(P.jsxs)("div",{className:x.a.dialogs,children:[Object(P.jsx)("div",{className:x.a.dialogsItems,children:t}),Object(P.jsxs)("div",{className:x.a.messages,children:[n,Object(P.jsx)("div",{className:x.a.addBlock,children:Object(P.jsx)(z,{onSubmit:function(t){e.addMessgeBtt(t.newMessageBoddy)}})})]})]})},J=n(13),H=n(48),R=n(8),V=Object(R.d)(Object(J.b)((function(e){return{dialogsPage:e.dialogsPage}}),(function(e){return{addMessgeBtt:function(t){e(function(e){return{type:h,newMessageBoddy:e}}(t))}}})),H.a)(G),q=n(133),W=n.n(q),K=function(){return Object(P.jsx)("img",{className:W.a.loader,src:"https://samherbert.net/svg-loaders/svg-loaders/puff.svg"})},Y=n(72),X=n.n(Y),Z=function(e){return Object(P.jsx)("header",{className:X.a.header,children:e.isFetching?Object(P.jsx)(K,{}):Object(P.jsx)("div",{className:X.a.loginBlock,children:e.isAuth?Object(P.jsxs)("div",{children:[Object(P.jsx)("div",{children:e.login}),Object(P.jsx)("div",{children:Object(P.jsx)(p.b,{to:"/login",className:X.a.login,onClick:function(){e.userLogOut()},children:"Logout"})})]}):Object(P.jsx)(p.b,{to:"/login",children:"Login"})})})},Q=n(11),$=n.n(Q),ee=n(15),te=n(134).create({withCredentials:!0,headers:{"API-KEY":"8a9d7844-8f01-425a-adf0-76c5abdfd30b"},baseURL:"https://social-network.samuraijs.com/api/1.0/"}),ne={getUsers:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10;return te.get("users?page=".concat(e,"&count=").concat(t)).then((function(e){return e.data}))},unfollow:function(e){return te.delete("follow/".concat(e))},follow:function(e){return te.post("follow/".concat(e),{})}},ae=function(){return te.get("auth/me")},re=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=arguments.length>3?arguments[3]:void 0;return te.post("auth/login",{email:e,password:t,rememberMe:n,captcha:a})},se=function(){return te.delete("auth/login")},ce=function(e){return te.get("profile/".concat(e))},ie=function(e){return te.get("profile/status/".concat(e))},oe=function(e){return te.put("profile/status",{status:e})},ue=function(e){var t=new FormData;return t.append("image",e),te.put("profile/photo",t,{headers:{"Content-Type":"multipart/form-data"}})},le=function(e){return te.put("profile",e)},de=function(){return te.get("security/get-captcha-url")},je=n(21),pe="samurai-JS/auth/SET_USER_DATA",fe="samurai-JS/auth/TOGGLE_IS_FETCHING",be="samuraiJS/auth/GET_CAPTCHA",he={id:null,email:null,login:null,isAuth:!1,isFetching:!1,captchaUrl:null},me=function(e,t,n,a){return{type:pe,payload:{id:e,email:t,login:n,isAuth:a}}},Oe=function(){return function(){var e=Object(ee.a)($.a.mark((function e(t){var n,a,r,s,c;return $.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ae();case 2:0===(n=e.sent).data.resultCode&&(a=n.data.data,r=a.id,s=a.email,c=a.login,t(me(r,s,c,!0)));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},ge=function(){return function(){var e=Object(ee.a)($.a.mark((function e(t){var n,a;return $.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,de();case 2:n=e.sent,a=n.data.url,t({type:be,text:a});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},xe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:he,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case pe:return Object(b.a)(Object(b.a)({},e),t.payload);case fe:return Object(b.a)(Object(b.a)({},e),{},{isFetching:t.isFetching});case be:return Object(b.a)(Object(b.a)({},e),{},{captchaUrl:t.text});default:return e}},ve=function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(){return Object(o.a)(this,n),t.apply(this,arguments)}return Object(u.a)(n,[{key:"render",value:function(){return Object(P.jsx)(Z,Object(b.a)({},this.props))}}]),n}(s.a.Component),_e=Object(J.b)((function(e){return{isAuth:e.auth.isAuth,login:e.auth.login,isFetching:e.auth.isFetching}}),{userLogOut:function(){return function(){var e=Object(ee.a)($.a.mark((function e(t){return $.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,se();case 2:0===e.sent.data.resultCode&&t(me(null,null,null,!1));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}})(ve),Pe=Object(S.a)({form:"login"})((function(e){var t=e.handleSubmit,n=e.error,a=e.captchaUrl;return Object(P.jsxs)("form",{onSubmit:t,children:[U("Email","email",F,[T],null),U("Password","password",F,[T],"password"),U(null,"rememberMe",F,[],"checkbox","Remember me"),a&&Object(P.jsx)("img",{src:a}),a&&U("Symbols form image","captcha",F,[T],null),n&&Object(P.jsx)("div",{className:C.a.formSummaryError,children:n}),Object(P.jsx)("div",{children:Object(P.jsx)("button",{children:"Login"})})]})})),De=Object(R.d)(Object(J.b)((function(e){return{isAuth:e.auth.isAuth,captchaUrl:e.auth.captchaUrl}}),{userLogin:function(e,t,n,a){return function(){var r=Object(ee.a)($.a.mark((function r(s){var c,i;return $.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,re(e,t,n,a);case 2:0===(c=r.sent).data.resultCode?s(Oe()):(10===c.data.resultCode&&s(ge()),i=c.data.messages.length>0?c.data.messages[0]:"Some error",s(Object(je.a)("login",{_error:i})));case 4:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}()}}))((function(e){return e.isAuth?Object(P.jsx)(j.a,{to:"/profile"}):Object(P.jsxs)("div",{children:[Object(P.jsx)("h1",{children:"Login"}),Object(P.jsx)(Pe,{onSubmit:function(t){var n=t.email,a=t.password,r=t.rememberMe,s=t.captcha;e.userLogin(n,a,r,s)},captchaUrl:e.captchaUrl})]})})),ye=n(24),we=n.n(ye),Ne=function(){return Object(P.jsxs)("nav",{className:we.a.nav,children:[Object(P.jsx)("div",{className:"".concat(we.a.item),children:Object(P.jsx)(p.b,{to:"/profile",activeClassName:we.a.activeLink,children:"Profile"})}),Object(P.jsx)("div",{className:"".concat(we.a.item),children:Object(P.jsx)(p.b,{to:"/dialogs",activeClassName:we.a.activeLink,children:"Messages"})}),Object(P.jsx)("div",{className:"".concat(we.a.item),children:Object(P.jsx)(p.b,{to:"/settings",activeClassName:we.a.activeLink,children:"Settings"})}),Object(P.jsx)("div",{className:"".concat(we.a.item," ").concat(we.a.users),children:Object(P.jsx)(p.b,{to:"/users",activeClassName:we.a.activeLink,children:"Find Users"})})]})},Be="ADD_POST",Se="SET_USER_PROFILE",Ie="SET_STATUS",ke="DELETE_POST",Ce="SAVE_PHOTO_SUCCES",Ae="TOOGLE_EDIT_MODE",Ee={postsData:[{id:1,message:"How are you?"},{id:2,message:"It's my first post"},{id:3,message:"It's my second post"},{id:4,message:"It's my 4th post"}],profile:null,status:"",editMode:!1},Fe=function(e){return{type:Ie,status:e}},Ue=function(e){return{type:Ae,editMode:e}},Te=function(e){return function(){var t=Object(ee.a)($.a.mark((function t(n){var a;return $.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,ce(e);case 2:a=t.sent,n((r=a.data,{type:Se,profile:r}));case 4:case"end":return t.stop()}var r}),t)})));return function(e){return t.apply(this,arguments)}}()},Le=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ee,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Be:return Object(b.a)(Object(b.a)({},e),{},{postsData:[].concat(Object(f.a)(e.postsData),[{id:5,message:t.postText,like:0}])});case ke:return Object(b.a)(Object(b.a)({},e),{},{postsData:e.postsData.filter((function(e){return e.id!=t.postId}))});case Se:return Object(b.a)(Object(b.a)({},e),{},{profile:t.profile});case Ie:return Object(b.a)(Object(b.a)({},e),{},{status:t.status});case Ce:return Object(b.a)(Object(b.a)({},e),{},{profile:Object(b.a)(Object(b.a)({},e.profile),{},{photos:t.photos})});case Ae:return Object(b.a)(Object(b.a)({},e),{},{editMode:t.editMode});default:return e}},Me=n(95),ze=n.n(Me),Ge=n(58),Je=n.n(Ge),He=n.p+"static/media/profile.5faf09a7.png",Re=function(e){return Object(P.jsx)("div",{className:Je.a.itemBox,children:Object(P.jsxs)("div",{className:Je.a.itemContent,children:[Object(P.jsx)("div",{className:Je.a.imgBox,children:Object(P.jsx)("img",{src:e.profile.photos.large||He})}),Object(P.jsx)("div",{className:Je.a.text,children:e.message})]})})},Ve=L(70),qe=Object(S.a)({form:"login"})((function(e){return Object(P.jsxs)("form",{onSubmit:e.handleSubmit,children:[Object(P.jsx)("div",{children:Object(P.jsx)(B.a,{name:"postText",component:E,validate:Ve})}),Object(P.jsx)("div",{children:Object(P.jsx)("button",{children:"Add Post"})})]})})),We=function(e){return Object(P.jsx)("div",{children:Object(P.jsx)(qe,{onSubmit:function(t){e.addPostBtt(t.postText)}})})},Ke=s.a.memo((function(e){return e.profile?Object(P.jsxs)("div",{className:ze.a.postBlock,children:[Object(P.jsx)("h3",{children:"My posts"}),Object(P.jsx)("div",{className:ze.a.posts,children:e.postsData.map((function(t){return Object(P.jsx)(Re,{message:t.message,profile:e.profile},t.id)}))}),Object(P.jsx)("div",{children:Object(P.jsx)(We,{addPostBtt:e.addPostBtt})})]}):Object(P.jsx)(K,{})})),Ye=Object(J.b)((function(e){return{postsData:e.profilePage.postsData,profile:e.profilePage.profile}}),(function(e){return{addPostBtt:function(t){e(function(e){return{type:Be,postText:e}}(t))}}}))(Ke),Xe=n(6),Ze=n.n(Xe),Qe=n(97),$e=function(e){var t=Object(r.useState)(!1),n=Object(Qe.a)(t,2),a=n[0],s=n[1],c=Object(r.useState)(e.status),i=Object(Qe.a)(c,2),o=i[0],u=i[1];return Object(r.useEffect)((function(){u(e.status)}),[e.status]),Object(P.jsxs)("div",{className:Ze.a.status,children:[!a&&Object(P.jsx)("div",{children:Object(P.jsx)("span",{onDoubleClick:e.isOwner&&function(){s(!0)},children:e.status||"NO STATUS"})}),a&&Object(P.jsx)("div",{children:Object(P.jsx)("input",{onChange:function(e){u(e.currentTarget.value)},autoFocus:!0,onBlur:function(){s(!1),e.updateStatus(o)},value:o})})]})},et=Object(S.a)({form:"profileForm"})((function(e){var t=e.handleSubmit,n=e.profile,a=e.error;return Object(P.jsxs)("form",{onSubmit:t,className:Ze.a.infoBlock,children:[Object(P.jsxs)("div",{className:Ze.a.infoBox,children:["Info",Object(P.jsxs)("div",{className:Ze.a.infoBoxItem,children:[Object(P.jsx)("span",{className:Ze.a.key,children:"Full Name: "}),U("Full Name","fullName",F,[],null)]}),Object(P.jsxs)("div",{className:Ze.a.infoBoxItem,children:[Object(P.jsx)("span",{className:Ze.a.key,children:"About me: "}),U("About me","aboutMe",F,[],null)]}),Object(P.jsxs)("div",{className:Ze.a.infoBoxItem,children:[Object(P.jsx)("span",{className:Ze.a.key,children:"Is Looking For Job: "}),U(null,"lookingForAJob",F,[],"checkBox")]}),Object(P.jsxs)("div",{className:Ze.a.infoBoxItem,children:[Object(P.jsx)("span",{className:Ze.a.key,children:"Job status: "}),U("Job status","lookingForAJobDescription",F,[],null)]})]}),Object(P.jsxs)("div",{className:Ze.a.infoBox,children:["Contacts",Object.keys(n.contacts).map((function(e){return Object(P.jsxs)("div",{className:Ze.a.contactBoxItem,children:[Object(P.jsxs)("span",{className:Ze.a.key,children:[e,": "]}),Object(P.jsx)("span",{className:Ze.a.property,children:U(null,"contacts.".concat(e),F,[],null)}),a&&Object(P.jsx)("div",{className:Ze.a.formSummaryError,children:a})]})}))]})]})})),tt=function(e){var t=e.profile,n=e.submit,a=e.saveData;return Object(P.jsxs)("div",{className:Ze.a.a0001,children:[Object(P.jsx)("div",{className:Ze.a.edit,onClick:function(){n("profileForm")},children:"Submit"}),Object(P.jsx)(et,{profile:t,initialValues:t,onSubmit:function(e){a(e)}})]})},nt=function(e){var t=e.profile,n=e.toggleEditMode,a=e.isOwner;return Object(P.jsxs)("div",{className:Ze.a.a0001,children:[a&&Object(P.jsx)("div",{className:Ze.a.edit,onClick:function(){n(!0)},children:"Edit Details"}),Object(P.jsxs)("div",{className:Ze.a.infoBlock,children:[Object(P.jsxs)("div",{className:Ze.a.infoBox,children:["Info",Object(P.jsxs)("div",{className:Ze.a.infoBoxItem,children:[Object(P.jsx)("span",{className:Ze.a.key,children:"Full Name:"}),Object(P.jsxs)("span",{className:Ze.a.propertyString,children:[" ",t.fullName]})]}),Object(P.jsxs)("div",{className:Ze.a.infoBoxItem,children:[Object(P.jsx)("span",{className:Ze.a.key,children:"About me:"}),Object(P.jsxs)("span",{className:Ze.a.propertyString,children:[" ",t.aboutMe]})]}),Object(P.jsxs)("div",{className:Ze.a.infoBoxItem,children:[Object(P.jsx)("span",{className:Ze.a.key,children:"Is Looking For Job:"}),t.lookingForAJob?Object(P.jsx)("span",{className:Ze.a.property,children:" Yes"}):Object(P.jsx)("span",{className:Ze.a.property,children:" No"})]}),Object(P.jsxs)("div",{className:Ze.a.infoBoxItem,children:[Object(P.jsx)("span",{className:Ze.a.key,children:"Job status:"}),Object(P.jsxs)("span",{className:Ze.a.propertyString,children:[" ",t.lookingForAJobDescription]})]})]}),Object(P.jsxs)("div",{className:Ze.a.infoBox,children:["Contacts",Object.keys(t.contacts).map((function(e){return Object(P.jsx)(at,{contactTitle:e,contactValue:t.contacts[e]})}))]})]})]})},at=function(e){var t=e.contactTitle,n=e.contactValue;return Object(P.jsxs)("div",{className:Ze.a.contactBoxItem,children:[Object(P.jsxs)("span",{className:Ze.a.key,children:[t,":"]}),Object(P.jsxs)("span",{className:Ze.a.property,children:[" ",n]})]})},rt=function(e){return Object(P.jsx)(P.Fragment,{children:e.editMode?Object(P.jsx)(tt,Object(b.a)({},e)):Object(P.jsx)(nt,Object(b.a)({},e))})},st=function(e){var t=e.profile,n=e.status,a=e.updateStatus,r=e.isOwner,s=e.savePhoto,c=e.toggleEditMode,i=e.editMode,o=e.saveData,u=e.submit;if(!t)return Object(P.jsx)(K,{});return Object(P.jsxs)("div",{className:Ze.a.description,children:[Object(P.jsxs)("div",{className:Ze.a.imgBox,children:[Object(P.jsx)("img",{className:Ze.a.ava,src:t.photos.large||He}),r&&Object(P.jsx)("input",{type:"file",onChange:function(e){e.target.files.length&&s(e.target.files[0])}})]}),Object(P.jsxs)("div",{children:[Object(P.jsx)("div",{className:Ze.a.name,children:t.fullName}),Object(P.jsx)($e,{isOwner:r,status:n,updateStatus:a}),Object(P.jsx)(rt,{profile:t,toggleEditMode:c,isOwner:r,editMode:i,saveData:o,submit:u})]})]})},ct=function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(){return Object(o.a)(this,n),t.apply(this,arguments)}return Object(u.a)(n,[{key:"refreshProfile",value:function(){var e=this.props.match.params.userId;e||(e=this.props.authorizedUserId),this.props.getProfileInfo(e),this.props.getStatus(e)}},{key:"componentDidMount",value:function(){this.refreshProfile()}},{key:"componentDidUpdate",value:function(e){this.props.match.params.userId!=e.match.params.userId&&this.refreshProfile()}},{key:"render",value:function(){return Object(P.jsxs)(P.Fragment,{children:[Object(P.jsx)(st,Object(b.a)(Object(b.a)({},this.props),{},{isOwner:!this.props.match.params.userId})),Object(P.jsx)(Ye,{})]})}}]),n}(s.a.Component),it=Object(R.d)(H.a,j.f,Object(J.b)((function(e){return{profile:e.profilePage.profile,status:e.profilePage.status,authorizedUserId:e.auth.id,isAuth:e.auth.isAuth,editMode:e.profilePage.editMode}}),{submit:je.b,getProfileInfo:Te,getStatus:function(e){return function(){var t=Object(ee.a)($.a.mark((function t(n){var a;return $.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,ie(e);case 2:a=t.sent,n(Fe(a.data));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},updateStatus:function(e){return function(){var t=Object(ee.a)($.a.mark((function t(n){return $.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,oe(e);case 2:0===t.sent.data.resultCode&&n(Fe(e));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},savePhoto:function(e){return function(){var t=Object(ee.a)($.a.mark((function t(n){var a;return $.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,ue(e);case 2:0===(a=t.sent).data.resultCode&&n((r=a.data.data.photos,{type:Ce,photos:r}));case 4:case"end":return t.stop()}var r}),t)})));return function(e){return t.apply(this,arguments)}}()},toggleEditMode:Ue,saveData:function(e){return function(){var t=Object(ee.a)($.a.mark((function t(n,a){var r,s;return $.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=a().auth.id,t.next=3,le(e);case 3:0===(s=t.sent).data.resultCode?(n(Te(r)),n(Ue(!1))):n(Object(je.a)("profileForm",{_error:s.data.messages[0]}));case 5:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()}}))(ct),ot=function(e,t,n,a){return e.map((function(e){return e[n]===t?Object(b.a)(Object(b.a)({},e),a):e}))},ut="FOLLOW",lt="UNFOLLOW",dt="SET_USERS",jt="SET_CURRENT_PAGE",pt="SET_USERS_COUNT",ft="TOGGLE_IS_FETCHING",bt="TOGGLE_IS_FOLLOWING_PROGRESS",ht={users:[],pageSize:13,totalUsersCount:0,currentPage:1,isFetching:!1,followingInProgress:[],portionSize:10},mt=function(e){return{type:ut,userId:e}},Ot=function(e){return{type:lt,userId:e}},gt=function(e){return{type:jt,currentPage:e}},xt=function(e){return{type:ft,isFetching:e}},vt=function(e,t){return{type:bt,followingInProgress:e,userId:t}},_t=function(){var e=Object(ee.a)($.a.mark((function e(t,n,a,r){return $.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t(vt(!0,n)),e.next=3,a(n);case 3:0===e.sent.data.resultCode&&t(r(n)),t(vt(!1,n));case 6:case"end":return e.stop()}}),e)})));return function(t,n,a,r){return e.apply(this,arguments)}}(),Pt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ht,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case ut:return Object(b.a)(Object(b.a)({},e),{},{users:ot(e.users,t.userId,"id",{followed:!0})});case lt:return Object(b.a)(Object(b.a)({},e),{},{users:ot(e.users,t.userId,"id",{followed:!1})});case dt:return Object(b.a)(Object(b.a)({},e),{},{users:t.users});case jt:return Object(b.a)(Object(b.a)({},e),{},{currentPage:t.currentPage});case pt:return Object(b.a)(Object(b.a)({},e),{},{totalUsersCount:t.totalUsers});case ft:return Object(b.a)(Object(b.a)({},e),{},{isFetching:t.isFetching});case bt:return Object(b.a)(Object(b.a)({},e),{},{followingInProgress:t.followingInProgress?[].concat(Object(f.a)(e.followingInProgress),[t.userId]):e.followingInProgress.filter((function(e){return e!=t.userId}))});default:return e}},Dt=n(96),yt=n.n(Dt),wt=function(e){var t=e.totalItemsCount,n=e.pageSize,a=e.currentPage,r=e.onPageChanged,s=Math.ceil(t/n),c=a-1;c=c<1?null:c;var i=a+1;return i=i>=s?null:i,Object(P.jsx)("div",{className:yt.a.paginator,children:Object(P.jsxs)("div",{children:[1===a?null:Object(P.jsxs)(P.Fragment,{children:[Object(P.jsx)("span",{onClick:function(){r(1)},children:1}),Object(P.jsx)("span",{children:"..."})]}),Object(P.jsx)("span",{onClick:function(){r(c)},children:a<3?null:Object(P.jsx)("span",{children:c})}),Object(P.jsxs)("span",{children:[a<3?null:Object(P.jsx)("span",{children:".."}),Object(P.jsx)("span",{className:yt.a.selectedPage,children:a}),a>s-2?null:Object(P.jsx)("span",{children:".."})]}),Object(P.jsx)("span",{onClick:function(){r(i)},children:i}),a===s?null:Object(P.jsxs)(P.Fragment,{children:[Object(P.jsx)("span",{children:"..."}),Object(P.jsx)("span",{onClick:function(){r(s)},children:s})]})]})})},Nt=n(135),Bt=n.n(Nt),St=function(e){var t=e.user,n=e.followingInProgress,a=e.unfollow,r=e.follow,s=e.isAuth;return Object(P.jsxs)("div",{children:[Object(P.jsx)("div",{children:Object(P.jsx)(p.b,{to:"/profile/".concat(t.id),children:Object(P.jsx)("img",{src:null!=t.photos.small?t.photos.small:"https://www.pavilionweb.com/wp-content/uploads/2017/03/man-300x300.png",className:Bt.a.userPhoto})})}),s&&Object(P.jsx)("div",{children:t.followed?Object(P.jsx)("button",{disabled:n.some((function(e){return e===t.id})),onClick:function(){a(t.id)},children:"Unfollow"}):Object(P.jsx)("button",{disabled:n.some((function(e){return e===t.id})),onClick:function(){r(t.id)},children:"Follow"})}),Object(P.jsx)("div",{children:t.name}),Object(P.jsx)("div",{children:t.status})]})},It=function(e){var t=e.currentPage,n=e.totalUsersCount,a=e.pageSize,r=e.onPageChanged,s=e.users,c=e.portionSize,i=e.isAuth,o=Object(I.a)(e,["currentPage","totalUsersCount","pageSize","onPageChanged","users","portionSize","isAuth"]);return Object(P.jsxs)("div",{children:[Object(P.jsx)(wt,{currentPage:t,onPageChanged:r,totalItemsCount:n,pageSize:a,portionSize:c}),s.map((function(e){return Object(P.jsx)(St,{user:e,followingInProgress:o.followingInProgress,unfollow:o.unfollow,follow:o.follow,isAuth:i},e.id)}))]})},kt=n(136),Ct=Object(kt.a)((function(e){return e.usersPage.users}),(function(e){return e.filter((function(e){return!0}))})),At=function(e){return e.usersPage.pageSize},Et=function(e){return e.usersPage.totalUsersCount},Ft=function(e){return e.usersPage.currentPage},Ut=function(e){return e.usersPage.isFetching},Tt=function(e){return e.usersPage.followingInProgress},Lt=function(e){return e.usersPage.portionSize},Mt=function(e){return e.auth.isAuth},zt=function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(o.a)(this,n);for(var a=arguments.length,r=new Array(a),s=0;s<a;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).onPageChanged=function(t){e.props.setCurrentPage(t),e.props.getUsers(t,e.props.pageSize)},e}return Object(u.a)(n,[{key:"componentDidMount",value:function(){this.props.getUsers(this.props.currentPage,this.props.pageSize)}},{key:"render",value:function(){return Object(P.jsx)(P.Fragment,{children:this.props.isFetching?Object(P.jsx)(K,{}):Object(P.jsx)(It,{totalUsersCount:this.props.totalUsersCount,pageSize:this.props.pageSize,portionSize:this.props.portionSize,currentPage:this.props.currentPage,onPageChanged:this.onPageChanged,users:this.props.users,follow:this.props.follow,unfollow:this.props.unfollow,followingInProgress:this.props.followingInProgress,isAuth:this.props.isAuth})})}}]),n}(s.a.Component),Gt=Object(R.d)(Object(J.b)((function(e){return{users:Ct(e),pageSize:At(e),totalUsersCount:Et(e),currentPage:Ft(e),isFetching:Ut(e),followingInProgress:Tt(e),portionSize:Lt(e),isAuth:Mt(e)}}),{follow:function(e){return function(){var t=Object(ee.a)($.a.mark((function t(n){return $.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:_t(n,e,ne.follow.bind(e),mt);case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},unfollow:function(e){return function(){var t=Object(ee.a)($.a.mark((function t(n){return $.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:_t(n,e,ne.unfollow.bind(e),Ot);case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},setCurrentPage:gt,getUsers:function(e,t){return function(){var n=Object(ee.a)($.a.mark((function n(a){var r;return $.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return a(xt(!0)),a(gt(e)),n.next=4,ne.getUsers(e,t);case 4:r=n.sent,a(xt(!1)),a((c=r.items,{type:dt,users:c})),a((s=r.totalCount,{type:pt,totalUsers:s}));case 8:case"end":return n.stop()}var s,c}),n)})));return function(e){return n.apply(this,arguments)}}()}}))(zt),Jt="INITIALIZED_SUCCESS",Ht={initialized:!1},Rt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ht,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Jt:return Object(b.a)(Object(b.a)({},e),{},{initialized:!0});default:return e}},Vt={friendsData:[{name:"Dima",img:"https://meragor.com/files/styles//ava_800_800_wm/standoff_162.jpg"},{name:"Andrey",img:"https://avatars.mds.yandex.net/get-zen_doc/3512693/pub_5efb3ff066fe1d5006536937_5efb4be4cdd4d637ce0fd2e8/scale_1200"},{name:"Maxim",img:"https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcTn8H3mqnU943_lgdPtj-JIGRjyKAlp3FSLzg&usqp=CAU"}]},qt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Vt;return e},Wt=n(137),Kt=n(129),Yt=Object(R.c)({dialogsPage:O,profilePage:Le,sidebar:qt,usersPage:Pt,auth:xe,form:Kt.a,app:Rt}),Xt=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||R.d,Zt=Object(R.e)(Yt,Xt(Object(R.a)(Wt.a)));window.__store__=Zt;var Qt=Zt,$t=function(e){return function(t){return Object(P.jsx)(P.Fragment,{children:Object(P.jsx)(r.Suspense,{fallback:Object(P.jsx)(K,{}),children:Object(P.jsx)(e,Object(b.a)({},t))})})}},en=s.a.lazy((function(){return n.e(3).then(n.bind(null,293))})),tn=function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(o.a)(this,n);for(var a=arguments.length,r=new Array(a),s=0;s<a;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).catchAllUnhandledErrors=function(e){alert("Some error occured"),console.error(e)},e}return Object(u.a)(n,[{key:"componentDidMount",value:function(){this.props.initializeApp(),window.addEventListener("unhandledrejection",this.catchAllUnhandledErrors)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("unhandledrejection",this.catchAllUnhandledErrors)}},{key:"render",value:function(){return this.props.initialized?Object(P.jsxs)("div",{className:"app-wrapper",children:[Object(P.jsx)(_e,{}),Object(P.jsxs)("div",{className:"all-info-page",children:[Object(P.jsx)(Ne,{}),Object(P.jsxs)("div",{className:"contextBox",children:[Object(P.jsx)(j.b,{exact:"/",render:function(){return Object(P.jsx)(j.a,{to:"/profile"})}}),Object(P.jsx)(j.b,{path:"/dialogs",render:function(){return Object(P.jsx)(V,{})}}),Object(P.jsx)(j.b,{path:"/profile/:userId?",render:function(){return Object(P.jsx)(it,{})}}),Object(P.jsx)(j.b,{path:"/settings",render:$t(en)}),Object(P.jsx)(j.b,{path:"/users",render:function(){return Object(P.jsx)(Gt,{})}}),Object(P.jsx)(j.b,{path:"/login",render:function(){return Object(P.jsx)(De,{})}})]})]})]}):Object(P.jsx)(K,{})}}]),n}(r.Component),nn=Object(R.d)(j.f,Object(J.b)((function(e){return{initialized:e.app.initialized}}),{initializeApp:function(){return function(e){var t=e(Oe());Promise.all([t]).then((function(){e({type:Jt})}))}}}))(tn),an=function(e){return Object(P.jsx)(s.a.StrictMode,{children:Object(P.jsx)(p.a,{children:Object(P.jsx)(J.a,{store:Qt,children:Object(P.jsx)(nn,{})})})})};i.a.render(Object(P.jsx)(an,{}),document.getElementById("root")),a()},48:function(e,t,n){"use strict";n.d(t,"a",(function(){return f}));var a=n(3),r=n(27),s=n(28),c=n(30),i=n(29),o=n(1),u=n.n(o),l=n(13),d=n(9),j=n(0),p=function(e){return{isAuth:e.auth.isAuth}},f=function(e){var t=function(t){Object(c.a)(o,t);var n=Object(i.a)(o);function o(){return Object(r.a)(this,o),n.apply(this,arguments)}return Object(s.a)(o,[{key:"render",value:function(){return this.props.isAuth?Object(j.jsx)(e,Object(a.a)({},this.props)):Object(j.jsx)(d.a,{to:"/login"})}}]),o}(u.a.Component);return Object(l.b)(p)(t)}},53:function(e,t,n){e.exports={formControl:"FormsControl_formControl__3c4w2",err:"FormsControl_err__A2dut",formSummaryError:"FormsControl_formSummaryError__JSrAT"}},56:function(e,t,n){e.exports={dialogs:"Dialogs_dialogs__35PTw",dialogsItems:"Dialogs_dialogsItems__1LdbS",addBlock:"Dialogs_addBlock__i-3rP"}},57:function(e,t,n){e.exports={dialog:"DialogItem_dialog__28SWE",item:"DialogItem_item__1tDvT",name:"DialogItem_name__Jg0N_",activeLink:"DialogItem_activeLink__Dlkmc"}},58:function(e,t,n){e.exports={itemBox:"Post_itemBox__2J8Mx",itemContent:"Post_itemContent__qLEcN",imgBox:"Post_imgBox__3E9VG",text:"Post_text__1Gw6X"}},6:function(e,t,n){e.exports={description:"ProfileInfo_description__dIfKa",imgBox:"ProfileInfo_imgBox__10WHV",ava:"ProfileInfo_ava__3A2Or",name:"ProfileInfo_name__3J0j-",status:"ProfileInfo_status__3QP5Y",a0001:"ProfileInfo_a0001__IGcPV",edit:"ProfileInfo_edit__1JZbG",infoBlock:"ProfileInfo_infoBlock__te5So",infoBox:"ProfileInfo_infoBox__14u83",infoBoxItem:"ProfileInfo_infoBoxItem__2Tu06",contactBoxItem:"ProfileInfo_contactBoxItem__1Hxns",key:"ProfileInfo_key__12JgN",property:"ProfileInfo_property__7YOSF",propertyString:"ProfileInfo_propertyString__3VxKN"}},72:function(e,t,n){e.exports={header:"Header_header__1aDUx",loginBlock:"Header_loginBlock__3SCHH"}},95:function(e,t,n){e.exports={postBlock:"MyPosts_postBlock__15PaX"}},96:function(e,t,n){e.exports={selectedPage:"Pagination_selectedPage__2ynfE",paginator:"Pagination_paginator__1DnLe",pageNumber:"Pagination_pageNumber__1D9IR"}}},[[291,1,2]]]);
//# sourceMappingURL=main.c10d7096.chunk.js.map