{"version":3,"sources":["components/common/FormsControl/FormsControl.module.css","components/Profile/MyPosts/Post/Post.module.css","hoc/WithAuthRedirect.tsx","components/Users/Users.module.css","components/Profile/MyPosts/MyPosts.module.css","components/common/Pagination/Pagination.module.css","api/chatAPI.ts","redux/chatReducer.ts","components/common/Preloader/Preloader.module.css","components/Profile/ProfilePage.module.css","components/Profile/ProfileInfo/ProfileInfo.module.css","reportWebVitals.js","redux/dialogsReducer.ts","components/common/FormsControl/FormsControl.tsx","utils/validators.tsx","api/api.ts","components/Dialogs/AddMessageForm.tsx","assets/images/profile.png","components/Dialogs/Dialogs.tsx","components/Dialogs/DialogsContainer.tsx","api/authAPI.ts","api/securityAPI.ts","redux/authReducer.ts","components/Login/LoginPage.tsx","api/profileAPI.ts","redux/profileReducer.ts","components/Profile/MyPosts/Post/Post.tsx","components/Profile/MyPosts/MyPostsForm.tsx","components/common/Preloader/Preloader.tsx","components/Profile/MyPosts/MyPosts.tsx","components/Profile/ProfileHeader/ProfileStatus.tsx","components/Profile/ProfileHeader/ProfileHeader.tsx","components/Profile/ProfileInfo/EditMode.tsx","assets/images/facebook.png","assets/images/github.png","assets/images/twitter.png","assets/images/instagram.png","components/Profile/ProfileInfo/ProfileInfo.tsx","components/Profile/ProfilePage.tsx","redux/appReducer.ts","utils/object-helpers.ts","api/usersAPI.ts","redux/usersReducer.ts","redux/reduxStore.ts","hoc/LazyLoading.tsx","components/common/Pagination/Pagination.tsx","components/Users/User.tsx","redux/Selectors/usersSelectors.ts","components/Users/UserSearchForms.tsx","components/Users/Users.tsx","redux/Selectors/headerSelectors.ts","components/Header/Header.tsx","App.tsx","index.tsx","components/Dialogs/Dialogs.module.css","components/Header/Header.module.css","components/Profile/ProfileHeader/ProfileHeader.module.css"],"names":["module","exports","mapStateToPropsForRedirect","state","isAuth","auth","withAuthRedirect","WrappedComponent","connect","props","restProps","to","subscribers","ws","closeHandler","notifySubscribersAboutStatus","setTimeout","createChanel","messageHandler","e","newMessages","JSON","parse","data","forEach","s","openHandler","errorHandler","console","error","cleanUp","removeEventListener","status","close","WebSocket","addEventListener","chatAPI","eventName","callback","push","filter","message","send","initialState","messages","actions","type","payload","_newMessageHandler","newMessageHandlerCreator","dispatch","_statusChangedHandler","statusChangedHandlerCreator","startMessagesListening","a","stopMessagesListening","sendChatMessage","chatReducer","action","map","m","id","v1","index","array","length","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","messagesData","dialogsData","name","img","dialogsReducer","newMessageBody","FormControl","meta","touched","children","hasErr","className","formControl","err","MyTextarea","input","TextArea","MyInput","createField","placeholder","component","validators","text","Field","validate","ResultCodeEnum","ResultCodeForCaptcha","required","value","maxLengthCreator","maxLength","maxLength100","reduxForm","form","onSubmit","handleSubmit","DialogItem","dialog","activeClassName","activeLink","item","src","alt","userPhoto","Dialogs","addMessage","dialogsElement","d","messagesElements","dialogs","dialogsItems","addBlock","compose","dialogsPage","instance","axios","create","withCredentials","headers","baseURL","authAPI","get","response","email","password","rememberMe","captcha","post","delete","securityAPI","login","isFetching","captchaUrl","authMe","resultCode","success","getCaptchaUrl","url","authReducer","LoginReduxForm","undefined","formSummaryError","LoginPage","useSelector","useDispatch","CaptchaIsRequired","stopSubmit","_error","userLogin","profileAPI","userId","put","photoFile","formData","FormData","append","postsData","profile","editMode","addPost","postText","deletePost","postId","setUserProfile","setStatus","savePhotoSuccess","photos","toggleEditMode","getProfileInfo","profileReducer","p","Post","itemBox","itemContent","imgBox","profileDefault","maxLength70","MyPostReduxForm","PostsForm","Preloader","loader","MyPosts","React","memo","postBlock","posts","elem","large","MyPostsForm","ProfileStatus","useState","setEditMode","useEffect","profile__status","isOwner","onClick","onChange","currentTarget","autoFocus","onBlur","updateStatus","ProfileHeader","savePhoto","profile__header__container","avatar__container","profilePhoto","style","display","target","files","profile__name","fullName","EditModeFormRedux","submit","profile__info__container","profile__contacts__container","block","EditMode","saveData","initialValues","StaticProfileData","contacts","facebook","instagram","twitter","github","aboutMe","lookingForAJobDescription","profile__info__list","profile__info__nodata","profile__contacts__list","href","facebookLogo","instagramLogo","twitterLogo","githubLogo","profile__contacts__nodata","ProfileInfo","Profile","this","match","params","authorizedUserId","getStatus","refreshProfile","prevProps","profile__page","Component","withRouter","profilePage","getState","initialized","collapsed","appReducer","updateObjectInArray","items","itemId","objPropsName","newObjProps","u","usersAPI","getUsers","currentPage","pageSize","term","friend","unfollow","follow","users","totalUsersCount","followingInProgress","portionSize","totalUsers","requestUsers","totalCount","_followUnfollowFlow","apiMethod","actionCreator","usersReducer","followed","rootReducer","combineReducers","usersPage","formReducer","app","chat","composeEnhancers","window","__REDUX_DEVTOOLS_EXTENSION_COMPOSE__","store","createStore","applyMiddleware","thunkMiddleware","__store__","LazyLoading","fallback","Pagination","totalItemsCount","onPageChanged","pagesCount","Math","ceil","before","after","styles","paginator","selectedPage","User","user","userContainer","small","disabled","some","userDescription","getUsersData","createSelector","getPageSize","getTotalUsersCount","getCurrentPage","getIsFetching","getFollowingInProgress","getIsAuth","getUsersFilter","userSearchForms","values","UserSearchForm","onFilterChanged","enableReinitialize","String","isSubmitting","as","Users","history","useHistory","actualPage","actualFilter","parsed","queryString","location","search","slice","page","pathname","followUser","userID","bind","unfollowUser","getAuthFetching","getLogin","AppHeader","LogOut","padding","span","theme","mode","altMenu","Item","altMenuItem","UserOutlined","fontSize","MessageOutlined","UsergroupDeleteOutlined","SettingOutlined","WechatOutlined","loginBlock","hiddenLoginBlock","backgroundColor","icon","nickName","SubMenu","Menu","Content","Layout","Footer","Sider","SettingsContainer","lazy","LazyChat","LazySettings","App","catchAllUnhandledErrors","alert","initializeApp","width","defaultOpenKeys","height","title","minHeight","exact","path","render","DialogsContainer","textAlign","AppContainer","promise","Promise","all","SamuraiJSApp","StrictMode","ReactDOM","document","getElementById"],"mappings":"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","file":"static/js/main.1c74ea74.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"formControl\":\"FormsControl_formControl__3c4w2\",\"err\":\"FormsControl_err__A2dut\",\"formSummaryError\":\"FormsControl_formSummaryError__JSrAT\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"itemBox\":\"Post_itemBox__2J8Mx\",\"itemContent\":\"Post_itemContent__qLEcN\",\"imgBox\":\"Post_imgBox__3E9VG\",\"text\":\"Post_text__1Gw6X\"};","import React, {ComponentType} from 'react'\r\nimport {connect} from 'react-redux'\r\nimport {Redirect} from 'react-router'\r\nimport {AppStateType} from \"../redux/reduxStore\";\r\n\r\nlet mapStateToPropsForRedirect = (state: AppStateType) => ({\r\n    isAuth: state.auth.isAuth,\r\n} as MapPropsType)\r\n\r\ntype MapPropsType = {\r\n    isAuth: boolean\r\n}\r\ntype DispatchPropsType = {\r\n\r\n}\r\n\r\nexport function withAuthRedirect<WCP>(WrappedComponent: ComponentType<WCP>) {\r\n\r\n    const RedirectComponent: React.FC<MapPropsType & DispatchPropsType> = (props)  => {\r\n        let {isAuth, ...restProps} = props\r\n\r\n        if (!isAuth) return <Redirect to={'/login'}/>\r\n\r\n        return <WrappedComponent {...restProps as WCP} />\r\n    }\r\n\r\n    let ConnectedAuthRedirectComponent = connect<MapPropsType, DispatchPropsType, WCP, AppStateType>\r\n    (mapStateToPropsForRedirect, {})\r\n    (RedirectComponent)\r\n\r\n    return ConnectedAuthRedirectComponent\r\n}\r\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"userContainer\":\"Users_userContainer__VEqcy\",\"userPhoto\":\"Users_userPhoto__2YoK6\",\"userDescription\":\"Users_userDescription__1bBvz\",\"selectedPage\":\"Users_selectedPage__22Fmw\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"postBlock\":\"MyPosts_postBlock__15PaX\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"selectedPage\":\"Pagination_selectedPage__2ynfE\",\"paginator\":\"Pagination_paginator__1DnLe\",\"pageNumber\":\"Pagination_pageNumber__1D9IR\"};","let subscribers = {\r\n    'messagesReceived': [] as MessagesReceivedSubscriberType[],\r\n    'statusChanged': [] as StatusChangedSubscriberType[]\r\n}\r\n\r\nlet ws: WebSocket | null = null\r\n\r\nconst closeHandler = () => {\r\n    notifySubscribersAboutStatus('pending')\r\n    setTimeout(createChanel, 3000)\r\n}\r\n\r\nconst messageHandler = (e: MessageEvent) => {\r\n    const newMessages = JSON.parse(e.data)\r\n    subscribers['messagesReceived'].forEach(s => s(newMessages))\r\n}\r\n\r\nconst openHandler = () => {\r\n    notifySubscribersAboutStatus('ready')\r\n}\r\n\r\nconst errorHandler = () => {\r\n    notifySubscribersAboutStatus('error')\r\n    console.error('REFRESH PAGE')\r\n}\r\n\r\nconst cleanUp = () => {\r\n    ws?.removeEventListener('close', closeHandler)\r\n    ws?.removeEventListener('message', messageHandler)\r\n    ws?.removeEventListener('open', openHandler)\r\n    ws?.removeEventListener('error', errorHandler)\r\n}\r\n\r\nconst notifySubscribersAboutStatus = (status: StatusType) => {\r\n    subscribers['statusChanged'].forEach(s => s(status))\r\n\r\n}\r\n\r\nfunction createChanel() {\r\n    cleanUp()\r\n    ws?.close()\r\n    ws = new WebSocket('wss://social-network.samuraijs.com/handlers/ChatHandler.ashx')\r\n    notifySubscribersAboutStatus('pending')\r\n    ws.addEventListener('close', closeHandler)\r\n    ws.addEventListener('message', messageHandler)\r\n    ws.addEventListener('open', openHandler)\r\n    ws.addEventListener('error', errorHandler)\r\n\r\n}\r\n\r\n\r\nexport const chatAPI = {\r\n    start() {\r\n        createChanel()\r\n    },\r\n    stop() {\r\n        subscribers[\"messagesReceived\"] = []\r\n        subscribers[\"statusChanged\"] = []\r\n        cleanUp()\r\n        ws?.close()\r\n    },\r\n    subscribe(eventName: EventsNamesType, callback: MessagesReceivedSubscriberType | StatusChangedSubscriberType) {\r\n        // @ts-ignore\r\n        subscribers[eventName].push(callback)\r\n        return () => {\r\n            // @ts-ignore\r\n            subscribers[eventName] = subscribers[eventName].filter(s => s !== callback)\r\n        }\r\n    },\r\n    unsubscribe(eventName: EventsNamesType, callback: MessagesReceivedSubscriberType | StatusChangedSubscriberType) {\r\n        // @ts-ignore\r\n        subscribers[eventName] = subscribers[eventName].filter(s => s !== callback)\r\n    },\r\n    sendChatMessage(message: string) {\r\n        ws?.send(message)\r\n    }\r\n}\r\n\r\ntype EventsNamesType = 'messagesReceived' | 'statusChanged'\r\ntype MessagesReceivedSubscriberType = (messages: MessageChatAPIType[]) => void\r\ntype StatusChangedSubscriberType = (status: StatusType) => void\r\n\r\nexport type MessageChatAPIType = {\r\n    userId: number\r\n    photo: string,\r\n    message: string\r\n    userName: string\r\n}\r\n\r\nexport type StatusType = 'pending' | 'ready' | 'error'\r\n","import {DefaultThunkType, InferActionTypes} from \"./reduxStore\";\r\nimport {chatAPI, MessageChatAPIType, StatusType} from \"../api/chatAPI\";\r\nimport {Dispatch} from \"redux\";\r\nimport {v1} from 'uuid'\r\n\r\nlet initialState = {\r\n    messages: [] as ChatMessageType[],\r\n    status: 'pending' as StatusType\r\n}\r\n\r\nconst chatReducer = (state = initialState, action: ActionsType): InitialStateType => {\r\n    switch (action.type) {\r\n        case \"socialNetwork/app/MESSAGE_RECEIVED\":\r\n            return {...state,\r\n            messages: [...state.messages, ...action.payload.message\r\n                .map(m => ({...m, id: v1()}))]\r\n                .filter((m, index, array) => index >= array.length - 100)\r\n            }\r\n        case \"socialNetwork/app/STATUS_CHANGED\":\r\n            return {...state,\r\n               status: action.payload.status\r\n            }\r\n        default:\r\n            return state\r\n    }\r\n}\r\n\r\nexport const actions = {\r\n    messagesReceived: (message: MessageChatAPIType[]) => ({\r\n        type: 'socialNetwork/app/MESSAGE_RECEIVED', payload: {message}\r\n    } as const),\r\n    statusChanged: (status: StatusType) => ({\r\n        type: \"socialNetwork/app/STATUS_CHANGED\", payload: {status}\r\n    } as const)\r\n}\r\n\r\nlet _newMessageHandler: ((messages: MessageChatAPIType[]) => void) | null = null\r\nconst newMessageHandlerCreator = (dispatch: Dispatch) => {\r\n    if (_newMessageHandler === null) {\r\n        _newMessageHandler = (messages) => {\r\n            dispatch(actions.messagesReceived(messages))\r\n        }\r\n    }\r\n    return _newMessageHandler\r\n}\r\n\r\n\r\nlet _statusChangedHandler: ((messages: StatusType) => void) | null = null\r\nconst statusChangedHandlerCreator = (dispatch: Dispatch) => {\r\n    if (_statusChangedHandler === null) {\r\n        _statusChangedHandler = (status) => {\r\n            dispatch(actions.statusChanged(status))\r\n        }\r\n    }\r\n    return _statusChangedHandler\r\n}\r\n\r\nexport const startMessagesListening = (): ThunkType => async (dispatch) => {\r\n    chatAPI.start()\r\n    chatAPI.subscribe('messagesReceived',newMessageHandlerCreator(dispatch))\r\n    chatAPI.subscribe('statusChanged',statusChangedHandlerCreator(dispatch))\r\n\r\n}\r\n\r\nexport const stopMessagesListening = (): ThunkType => async (dispatch) => {\r\n    chatAPI.unsubscribe('messagesReceived',newMessageHandlerCreator(dispatch))\r\n    chatAPI.unsubscribe('statusChanged',statusChangedHandlerCreator(dispatch))\r\n    chatAPI.stop()\r\n}\r\n\r\nexport const sendChatMessage = (message: string): ThunkType => async () => {\r\n    chatAPI.sendChatMessage(message)\r\n}\r\n\r\nexport default chatReducer\r\n\r\ntype ChatMessageType = MessageChatAPIType & {id: string}\r\nexport type InitialStateType = typeof initialState\r\ntype ActionsType = InferActionTypes<typeof actions>\r\ntype ThunkType = DefaultThunkType<ActionsType>","// extracted by mini-css-extract-plugin\nmodule.exports = {\"loader\":\"Preloader_loader__lWjDE\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"profile__page\":\"ProfilePage_profile__page__3ESaw\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"profile__info__container\":\"ProfileInfo_profile__info__container__yvTWI\",\"profile__contacts__container\":\"ProfileInfo_profile__contacts__container__3iUYZ\",\"profile__info__list\":\"ProfileInfo_profile__info__list__49fgH\",\"profile__contacts__list\":\"ProfileInfo_profile__contacts__list__1p1FX\",\"profile__contacts__nodata\":\"ProfileInfo_profile__contacts__nodata__ogzFG\",\"profile__info__nodata\":\"ProfileInfo_profile__info__nodata__RTgHY\"};","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import {DialogType, MessagesType} from \"../types/types\";\r\nimport {InferActionTypes} from \"./reduxStore\";\r\n\r\nlet initialState = {\r\n    messagesData: [\r\n        {id: 1, message: 'Hi'},\r\n        {id: 2, message: 'How are you?'},\r\n        {id: 3, message: '42'},\r\n    ] as Array<MessagesType>,\r\n    dialogsData: [\r\n        {\r\n            id: 1,\r\n            name: 'Dima',\r\n            img: 'https://meragor.com/files/styles//ava_800_800_wm/standoff_162.jpg',\r\n        },\r\n        {\r\n            id: 2,\r\n            name: 'Andrey',\r\n            img: 'https://avatars.mds.yandex.net/get-zen_doc/3512693/pub_5efb3ff066fe1d5006536937_5efb4be4cdd4d637ce0fd2e8/scale_1200',\r\n        },\r\n        {\r\n            id: 3,\r\n            name: 'Maxim',\r\n            img: 'https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcTn8H3mqnU943_lgdPtj-JIGRjyKAlp3FSLzg&usqp=CAU',\r\n        },\r\n        {\r\n            id: 4,\r\n            name: 'Ghena',\r\n            img: 'https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcSx5wghphVB-NTZeDHzsjPFUGY2_V-yPNnq1g&usqp=CAU',\r\n        },\r\n        {\r\n            id: 5,\r\n            name: 'Renat',\r\n            img: 'http://pristor.ru/wp-content/uploads/2019/01/%D0%A8%D0%B8%D0%BA%D0%B0%D1%80%D0%BD%D1%8B%D0%B5-%D0%B0%D0%B2%D0%B0%D1%82%D0%B0%D1%80%D0%BA%D0%B8-%D0%B4%D0%BB%D1%8F-%D0%92%D0%9A%D0%BE%D0%BD%D1%82%D0%B0%D0%BA%D1%82%D0%B5-%D0%B4%D0%B5%D0%B2%D1%83%D1%88%D0%BA%D0%B0%D0%BC-%D0%B8-%D0%B4%D0%B5%D0%B2%D0%BE%D1%87%D0%BA%D0%B0%D0%BC-%D0%BF%D0%BE%D0%B4%D0%B1%D0%BE%D1%80%D0%BA%D0%B0-4.jpg',\r\n        },\r\n        {\r\n            id: 6,\r\n            name: 'Sasha',\r\n            img: 'https://cs-love.net/avatars/images/cs-love-avatar-0.jpg',\r\n        },\r\n        {\r\n            id: 7,\r\n            name: 'Victor',\r\n            img: 'https://sovietgames.su/wp-content/uploads/2016/07/%D0%90%D0%B2%D0%B0%D1%82%D0%B0%D1%80%D0%BA%D0%B0.jpg',\r\n        },\r\n    ] as Array<DialogType>,\r\n}\r\n\r\nconst dialogsReducer = (state = initialState,\r\n                        action: ActionsTypes): InitialStateType => {\r\n    switch (action.type) {\r\n        case 'socialNetwork/dialogs/ADD-MESSAGE':\r\n            return {\r\n                ...state,\r\n                messagesData: [...state.messagesData, {id: 1, message: action.newMessageBody}],\r\n            }\r\n\r\n        default:\r\n            return state\r\n    }\r\n}\r\n\r\nexport const actions = {\r\n    addMessage: (newMessageBody: string) => ({\r\n        type: 'socialNetwork/dialogs/ADD-MESSAGE',\r\n        newMessageBody,\r\n    } as const)\r\n}\r\n\r\nexport default dialogsReducer\r\n\r\ntype InitialStateType = typeof initialState\r\ntype ActionsTypes = InferActionTypes<typeof actions>","import React from 'react'\r\nimport s from './FormsControl.module.css'\r\nimport {Field, WrappedFieldMetaProps, WrappedFieldProps} from 'redux-form'\r\nimport {ValidatorsType} from \"../../../utils/validators\";\r\nimport {Input} from \"antd\";\r\nimport TextArea from \"antd/es/input/TextArea\";\r\n\r\ntype FormControlPropsType = {\r\n    meta: WrappedFieldMetaProps\r\n}\r\n\r\nconst FormControl: React.FC<FormControlPropsType> =\r\n    ({\r\n         meta: {touched, error},\r\n         children\r\n     }) => {\r\n        const hasErr = error && touched\r\n        return (\r\n            <div className={`${s.formControl} ${hasErr ? s.err : ''}`}>\r\n                <div>{children}</div>\r\n                {hasErr && <span>{error}</span>}\r\n            </div>\r\n        )\r\n    }\r\n\r\n\r\nexport const MyTextarea: React.FC<WrappedFieldProps> = (props) => {\r\n    const {input, meta, ...restProps} = props\r\n    return (\r\n        <FormControl {...props}>\r\n            <TextArea {...input} {...restProps} />\r\n        </FormControl>\r\n    )\r\n}\r\n\r\nexport const MyInput: React.FC<WrappedFieldProps> = (props) => {\r\n    const {input, meta, ...restProps} = props\r\n    return (\r\n        <FormControl {...props}>\r\n            <Input {...input} {...restProps} />\r\n        </FormControl>\r\n    )\r\n}\r\n\r\nexport function createField<FormKeysType extends string>(placeholder: string | undefined,\r\n                                          name: FormKeysType,\r\n                                          component: React.FC<WrappedFieldProps>,\r\n                                          validators: Array<ValidatorsType>,\r\n                                          type: string | null,\r\n                                          text = '',\r\n                                          props = {}) {\r\n    return (\r\n        <div>\r\n            <Field\r\n                placeholder={placeholder}\r\n                name={name}\r\n                component={component}\r\n                validate={validators}\r\n                type={type}\r\n                {...props}\r\n            />\r\n            {text}\r\n        </div>\r\n    )\r\n}\r\n\r\nexport type getStringKeys<T> = Extract<keyof T, string>","import React from 'react'\r\n\r\nexport type ValidatorsType = (value: string) => string | undefined\r\n\r\nexport const required: ValidatorsType = (value) => {\r\n  if (value) return undefined\r\n\r\n  return 'Field is required'\r\n}\r\n\r\nexport const maxLengthCreator  = (maxLength: number): ValidatorsType => (value) => {\r\n  if (value && value.length > maxLength)\r\n    return `Max length is ${maxLength} symbols`\r\n  return undefined\r\n}\r\n","import axios from 'axios'\r\n\r\nexport const instance = axios.create({\r\n    withCredentials: true,\r\n    headers: {\r\n        'API-KEY': 'a3bfbb3f-60e3-435f-a1ea-3cf028794565',\r\n    },\r\n    baseURL: 'https://social-network.samuraijs.com/api/1.0/',\r\n})\r\n\r\nexport type DefaultResponseType = {\r\n    data: { id: number }\r\n    resultCode: ResultCodeEnum\r\n    messages: Array<string>\r\n    fieldsErrors: Array<string>\r\n}\r\n\r\nexport enum ResultCodeEnum {\r\n    success = 0,\r\n    ERROR = 1,\r\n}\r\n\r\nexport enum ResultCodeForCaptcha {\r\n    CaptchaIsRequired = 10\r\n}\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n","import React from 'react'\r\nimport {InjectedFormProps, reduxForm} from 'redux-form'\r\nimport {createField, getStringKeys, MyTextarea} from '../common/FormsControl/FormsControl'\r\nimport {maxLengthCreator, required} from '../../utils/validators'\r\nimport {NewMessageFormType} from \"./Dialogs\";\r\n\r\nconst maxLength100 = maxLengthCreator(100)\r\n\r\nconst AddMessageForm: React.FC<InjectedFormProps<NewMessageFormType, PropsType> & PropsType> =\r\n    (props) => {\r\n        return (\r\n            <form onSubmit={props.handleSubmit}>\r\n                {createField<NewMessageFormKeysType>('Message Text', \"newMessageBody\", MyTextarea, [required, maxLength100], null)}\r\n                <button>Send</button>\r\n            </form>\r\n        )\r\n    }\r\n\r\nexport default reduxForm<NewMessageFormType, PropsType>({form: 'dialogAddMessageForm'})(AddMessageForm)\r\n\r\ntype NewMessageFormKeysType = getStringKeys<NewMessageFormType>\r\ntype PropsType = {}","export default __webpack_public_path__ + \"static/media/profile.5faf09a7.png\";","import React, {FC} from 'react'\r\nimport s from './Dialogs.module.css'\r\nimport AddMessageForm from './AddMessageForm'\r\nimport {NavLink} from \"react-router-dom\";\r\nimport {DialogType, MessagesType} from \"../../types/types\";\r\nimport userPhoto from './../../assets/images/profile.png'\r\n\r\n\r\ntype PropsType = {\r\n    dialogsData: Array<DialogType>\r\n    messagesData: Array<MessagesType>\r\n    addMessage: (text: string) => void\r\n}\r\nconst Dialogs: FC<PropsType> = ({messagesData, dialogsData, addMessage}) => {\r\n    let dialogsElement = dialogsData.map((d: DialogsPropsType) => (\r\n        <DialogItem id={d.id} name={d.name} img={d.img} key={d.id}/>\r\n    ))\r\n\r\n    let messagesElements = messagesData.map((m: { message: string }) => (\r\n        <div className={s.message}>{m.message}</div>\r\n    ))\r\n\r\n    let sendMessage = (value: NewMessageFormType) => {\r\n        addMessage(value.newMessageBody)\r\n    }\r\n\r\n    return (\r\n        <div className={s.dialogs}>\r\n            <div className={s.dialogsItems}>{dialogsElement}</div>\r\n            <div className={s.messages}>\r\n                {messagesElements}\r\n                <div className={s.addBlock}>\r\n                    <AddMessageForm onSubmit={sendMessage}/>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\ntype DialogsPropsType = {\r\n    id: number\r\n    img: string\r\n    name: string\r\n}\r\nconst DialogItem: FC<DialogsPropsType> = ({id, img, name}) => {\r\n    return (\r\n        <div className={s.dialog}>\r\n            <NavLink to={`/dialogs/${id}`} activeClassName={s.activeLink}>\r\n                <div className={s.item}>\r\n                    <img src={img} alt={userPhoto}/>\r\n                    <div className={s.name}>{name}</div>\r\n                </div>\r\n            </NavLink>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Dialogs\r\n\r\nexport type NewMessageFormType = {\r\n    newMessageBody: string\r\n}","import React, {ComponentType} from 'react'\r\nimport {actions} from '../../redux/dialogsReducer'\r\nimport Dialogs from './Dialogs'\r\nimport {connect} from 'react-redux'\r\nimport {withAuthRedirect} from '../../hoc/WithAuthRedirect'\r\nimport {compose} from 'redux'\r\nimport {AppStateType} from \"../../redux/reduxStore\";\r\n\r\nconst mapStateToProps = (state: AppStateType) => ({\r\n    dialogsData: state.dialogsPage.dialogsData,\r\n    messagesData: state.dialogsPage.messagesData,\r\n})\r\n\r\nexport default compose<ComponentType>(\r\n    connect(mapStateToProps, {\r\n        addMessage: actions.addMessage\r\n    }),\r\n    withAuthRedirect\r\n)(Dialogs)\r\n","import {DefaultResponseType, instance, ResultCodeEnum, ResultCodeForCaptcha} from \"./api\";\r\n\r\n\r\ntype authResponseType = {\r\n    data: { id: number, email: string, login: string }\r\n    resultCode: ResultCodeEnum\r\n    messages: Array<string>\r\n}\r\ntype LoginResponseType = {\r\n    data: { id: number }\r\n    resultCode: ResultCodeEnum | ResultCodeForCaptcha\r\n    messages: Array<string>\r\n}\r\n\r\nexport const authAPI = {\r\n    auth() {\r\n        return instance.get<authResponseType>(`auth/me`).then(response => response.data)\r\n    },\r\n    login(email: string, password: string, rememberMe = false, captcha: null | string = null) {\r\n        return instance.post<LoginResponseType>(`auth/login`, {\r\n            email,\r\n            password,\r\n            rememberMe,\r\n            captcha,\r\n        }).then(response => response.data)\r\n    },\r\n    logout() {\r\n        return instance.delete<DefaultResponseType>(`auth/login`)\r\n    },\r\n}","import {instance} from \"./api\";\r\n\r\nexport const securityAPI = {\r\n    getCaptcha() {\r\n        return instance.get<{ url: string }>(`security/get-captcha-url`).then(response => response.data)\r\n    },\r\n}","import {ResultCodeEnum, ResultCodeForCaptcha} from '../api/api'\r\nimport {stopSubmit} from 'redux-form'\r\nimport { DefaultThunkType, InferActionTypes} from \"./reduxStore\";\r\nimport {authAPI} from \"../api/authAPI\";\r\nimport {securityAPI} from \"../api/securityAPI\";\r\nimport {Action} from \"redux\";\r\n\r\nlet initialState = {\r\n    id: null as number | null,\r\n    email: null as string | null,\r\n    login: null as string | null,\r\n    isAuth: false,\r\n    isFetching: false,\r\n    captchaUrl: null as string | null,\r\n}\r\n\r\nconst authReducer = (state = initialState, action: ActionsTypes): initialStateType => {\r\n    switch (action.type) {\r\n        case 'socialNetwork/auth/SET_USER_DATA':\r\n            return {\r\n                ...state,\r\n                ...action.payload,\r\n            }\r\n\r\n        case 'socialNetwork/auth/TOGGLE_IS_FETCHING':\r\n            return {...state, isFetching: action.isFetching}\r\n\r\n        case 'socialNetwork/auth/GET_CAPTCHA':\r\n            return {...state, captchaUrl: action.text}\r\n\r\n        default:\r\n            return state\r\n    }\r\n}\r\n\r\nexport const actions = {\r\n    setAuthUserData: (id: number | null, email: string | null, login: string | null, isAuth: boolean) => ({\r\n        type: 'socialNetwork/auth/SET_USER_DATA',\r\n        payload: {id, email, login, isAuth},\r\n    } as const),\r\n    toggleIsFetching: (isFetching: boolean) => ({\r\n        type: 'socialNetwork/auth/TOGGLE_IS_FETCHING',\r\n        isFetching,\r\n    } as const),\r\n    getCaptchaUrlSuccess: (text: string) => ({\r\n        type: 'socialNetwork/auth/GET_CAPTCHA',\r\n        text,\r\n    } as const)\r\n}\r\n\r\nexport const authMe = (): ThunkType => async (dispatch) => {\r\n    const response = await authAPI.auth()\r\n    if (response.resultCode === ResultCodeEnum.success) {\r\n        const {id, email, login} = response.data\r\n        dispatch(actions.setAuthUserData(id, email, login, true))\r\n    }\r\n}\r\n\r\nexport const userLogin =\r\n    (email: string, password: string, rememberMe: boolean, captcha: string) => async (dispatch: any) => {\r\n        const response = await authAPI.login(email, password, rememberMe, captcha)\r\n        if (response.resultCode === ResultCodeEnum.success) {\r\n            dispatch(authMe())\r\n        } else {\r\n            if (response.resultCode === ResultCodeForCaptcha.CaptchaIsRequired) {\r\n                dispatch(getCaptchaUrl())\r\n            }\r\n            const err =\r\n                response.messages.length > 0\r\n                    ? response.messages[0]\r\n                    : 'Some error'\r\n            dispatch(stopSubmit('login', {_error: err}))\r\n        }\r\n    }\r\n\r\nexport const getCaptchaUrl = (): ThunkType => async (dispatch) => {\r\n    const response = await securityAPI.getCaptcha()\r\n    const captchaUrl = response.url\r\n    dispatch(actions.getCaptchaUrlSuccess(captchaUrl))\r\n}\r\n\r\nexport const userLogOut = (): ThunkType => {\r\n    return async (dispatch) => {\r\n        const response = await authAPI.logout()\r\n        if (response.data.resultCode === ResultCodeEnum.success) {\r\n            dispatch(actions.setAuthUserData(null, null, null, false));\r\n        }\r\n    }\r\n}\r\n\r\nexport default authReducer\r\n\r\nexport type initialStateType = typeof initialState\r\ntype ActionsTypes = InferActionTypes<typeof actions>\r\ntype ThunkType = DefaultThunkType<ActionsTypes >\r\n","import React from 'react'\r\nimport {useDispatch, useSelector} from 'react-redux'\r\nimport {InjectedFormProps, reduxForm} from 'redux-form'\r\nimport {userLogin} from '../../redux/authReducer'\r\nimport {createField, getStringKeys, MyInput} from '../common/FormsControl/FormsControl'\r\nimport {required} from '../../utils/validators'\r\nimport {Redirect} from 'react-router'\r\nimport s from './../common/FormsControl/FormsControl.module.css'\r\nimport {AppStateType} from \"../../redux/reduxStore\";\r\n\r\nconst LoginForm: React.FC<InjectedFormProps<LoginFormValuesType, LoginFormOwnPropsType> & LoginFormOwnPropsType>\r\n    = ({handleSubmit, error, captchaUrl}) => {\r\n    return (\r\n        <form onSubmit={handleSubmit}>\r\n            {createField<LoginFormValuesKeyType>('Email', \"email\", MyInput, [required], null)}\r\n            {createField<LoginFormValuesKeyType>('Password', 'password', MyInput, [required], 'password')}\r\n            {createField<LoginFormValuesKeyType>(undefined, 'rememberMe', MyInput, [], 'checkbox', 'Remember me')}\r\n            {captchaUrl && <img src={captchaUrl} alt={''}/>}\r\n            {captchaUrl &&\r\n            createField<LoginFormValuesKeyType>('Symbols form image', 'captcha', MyInput, [required], null)}\r\n            {error && <div className={s.formSummaryError}>{error}</div>}\r\n            <div>\r\n                <button>Login</button>\r\n            </div>\r\n        </form>\r\n    )\r\n}\r\n\r\nconst LoginReduxForm = reduxForm<LoginFormValuesType, LoginFormOwnPropsType>({\r\n    form: 'login',\r\n})(LoginForm)\r\n\r\nexport const LoginPage = () => {\r\n\r\n    const captchaUrl = useSelector((state: AppStateType) => state.auth.captchaUrl)\r\n    const isAuth = useSelector((state: AppStateType) => state.auth.isAuth)\r\n\r\n    const dispatch = useDispatch()\r\n\r\n    const onSubmit = ({email, password, rememberMe, captcha}: LoginFormValuesType) => {\r\n        dispatch(userLogin(email, password, rememberMe, captcha))\r\n    }\r\n\r\n    return isAuth ? (\r\n        <Redirect to={'/profile'}/>\r\n    ) : (\r\n        <div>\r\n            <h1>Login</h1>\r\n            <LoginReduxForm onSubmit={onSubmit} captchaUrl={captchaUrl}/>\r\n        </div>\r\n    )\r\n}\r\n\r\ntype LoginFormOwnPropsType = {\r\n    captchaUrl: string | null\r\n}\r\ntype LoginFormValuesType = {\r\n    email: string\r\n    password: string\r\n    rememberMe: boolean\r\n    captcha: string\r\n}\r\ntype LoginFormValuesKeyType = getStringKeys<LoginFormValuesType>","import {PhotosType, ProfileType} from \"../types/types\"\r\nimport {DefaultResponseType, instance, ResultCodeEnum} from \"./api\"\r\n\r\n\r\ntype savePhotoType = {\r\n    data: {\r\n        photos: PhotosType\r\n    }\r\n    resultCode: ResultCodeEnum\r\n    messages: Array<string>\r\n    fieldsErrors: Array<string>\r\n}\r\nexport const profileAPI = {\r\n    getProfileInfo(userId: number | null) {\r\n        return instance.get<ProfileType>(`profile/${userId}`)\r\n    },\r\n    getStatus(userId: number) {\r\n        return instance.get<string>(`profile/status/${userId}`)\r\n    },\r\n    updateStatus(status: string) {\r\n        return instance.put<DefaultResponseType>(`profile/status`, {\r\n            status,\r\n        })\r\n    },\r\n    savePhoto(photoFile: File) {\r\n        let formData = new FormData()\r\n        formData.append('image', photoFile)\r\n        return instance.put<savePhotoType>(`profile/photo`, formData, {\r\n            headers: {'Content-Type': 'multipart/form-data'},\r\n        }).then(response => response.data)\r\n    },\r\n    saveData(data: ProfileType) {\r\n        return instance.put<DefaultResponseType>(`profile`, data).then(response => response.data)\r\n    },\r\n}","import {stopSubmit} from 'redux-form'\r\nimport {ResultCodeEnum} from '../api/api'\r\nimport {PhotosType, PostDataType, ProfileType} from \"../types/types\";\r\nimport {AppStateType, DefaultThunkType, InferActionTypes} from \"./reduxStore\";\r\nimport {profileAPI} from \"../api/profileAPI\";\r\n\r\nlet initialState = {\r\n    postsData: [\r\n        {id: 1, message: 'How are you?'},\r\n        {id: 2, message: \"It's my first post\"},\r\n        {id: 3, message: \"It's my second post\"},\r\n        {id: 4, message: \"It's my 4th post\"},\r\n    ] as Array<PostDataType>,\r\n    profile: null as ProfileType | null,\r\n    status: '',\r\n    editMode: false,\r\n}\r\n\r\nconst profileReducer = (state = initialState, action: ActionsTypes): InitialStateType => {\r\n    switch (action.type) {\r\n        case 'socialNetwork/profile/ADD_POST': {\r\n            return {\r\n                ...state,\r\n                postsData: [\r\n                    ...state.postsData,\r\n                    {\r\n                        id: 5,\r\n                        message: action.postText,\r\n                    },\r\n                ],\r\n            }\r\n        }\r\n        case 'socialNetwork/profile/DELETE_POST': {\r\n            return {\r\n                ...state,\r\n                postsData: state.postsData.filter((p) => p.id !== action.postId),\r\n            }\r\n        }\r\n\r\n        case 'socialNetwork/profile/SET_USER_PROFILE':\r\n            return {...state, profile: action.profile}\r\n\r\n        case 'socialNetwork/profile/SET_STATUS':\r\n            return {...state, status: action.status}\r\n\r\n        case 'socialNetwork/profile/SAVE_PHOTO_SUCCESS':\r\n            return {...state, profile: {...state.profile, photos: action.photos} as ProfileType}\r\n\r\n        case 'socialNetwork/profile/TOGGLE_EDIT_MODE':\r\n            return {...state, editMode: action.editMode}\r\n\r\n        default:\r\n            return state\r\n    }\r\n}\r\n\r\nexport const actions = {\r\n    addPost: (postText: string) => ({type: 'socialNetwork/profile/ADD_POST', postText} as const),\r\n    deletePost: (postId: number) => ({type: 'socialNetwork/profile/DELETE_POST', postId} as const),\r\n    setUserProfile: (profile: ProfileType) => ({\r\n        type: 'socialNetwork/profile/SET_USER_PROFILE',\r\n        profile,\r\n    } as const),\r\n    setStatus: (status: string) => ({\r\n        type: 'socialNetwork/profile/SET_STATUS',\r\n        status,\r\n    } as const),\r\n    savePhotoSuccess: (photos: PhotosType) => ({type: 'socialNetwork/profile/SAVE_PHOTO_SUCCESS', photos} as const),\r\n    toggleEditMode: (editMode: boolean) => ({\r\n        type: 'socialNetwork/profile/TOGGLE_EDIT_MODE',\r\n        editMode,\r\n    } as const)\r\n}\r\n\r\nexport const getStatus = (userId: number): ThunkType => {\r\n    return async (dispatch) => {\r\n        const response = await profileAPI.getStatus(userId)\r\n        dispatch(actions.setStatus(response.data))\r\n    }\r\n}\r\n\r\nexport const updateStatus = (status: string): ThunkType => {\r\n    return async (dispatch) => {\r\n        const response = await profileAPI.updateStatus(status)\r\n        if (response.data.resultCode === ResultCodeEnum.success) {\r\n            dispatch(actions.setStatus(status))\r\n        }\r\n    }\r\n}\r\n\r\nexport const getProfileInfo = (userId: number | null): ThunkType => {\r\n    return async (dispatch) => {\r\n        const response = await profileAPI.getProfileInfo(userId)\r\n        dispatch(actions.setUserProfile(response.data))\r\n    }\r\n}\r\n\r\nexport const savePhoto = (photoFile: File): ThunkType => {\r\n    return async (dispatch) => {\r\n        const response = await profileAPI.savePhoto(photoFile)\r\n        if (response.resultCode === ResultCodeEnum.success) {\r\n            dispatch(actions.savePhotoSuccess(response.data.photos))\r\n        }\r\n    }\r\n}\r\n\r\nexport const saveData = (data: ProfileType) => {\r\n    return async (dispatch: any, getState: () => AppStateType) => {\r\n        const id = getState().auth.id\r\n        const response = await profileAPI.saveData(data)\r\n        if (response.resultCode === ResultCodeEnum.success) {\r\n            dispatch(getProfileInfo(id))\r\n            dispatch(actions.toggleEditMode(false))\r\n        } else {\r\n            dispatch(stopSubmit('profileForm', {_error: response.messages[0]}))\r\n        }\r\n    }\r\n}\r\n\r\nexport default profileReducer\r\n\r\nexport type InitialStateType = typeof initialState\r\ntype ActionsTypes = InferActionTypes<typeof actions>\r\ntype ThunkType = DefaultThunkType<ActionsTypes>\r\n","import React, {FC} from 'react'\r\nimport s from './Post.module.css'\r\nimport profileDefault from './../../../../assets/images/profile.png'\r\n\r\ntype PropsType = {\r\n    img: string | null\r\n    message: string\r\n}\r\nconst Post: FC<PropsType> = ({img, message}) => {\r\n  return (\r\n    <div className={s.itemBox}>\r\n      <div className={s.itemContent}>\r\n        <div className={s.imgBox}>\r\n          <img src={img || profileDefault} />\r\n        </div>\r\n        <div className={s.text}>{message}</div>\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default Post\r\n","import React from 'react'\r\nimport {InjectedFormProps, reduxForm} from 'redux-form'\r\nimport {maxLengthCreator} from '../../../utils/validators'\r\nimport {createField, getStringKeys, MyTextarea} from '../../common/FormsControl/FormsControl'\r\n\r\nconst maxLength70 = maxLengthCreator(70)\r\n\r\nconst MyPostForm: React.FC<InjectedFormProps<NewPostFormType, PropsType> & PropsType> = (props) => {\r\n    return (\r\n        <form onSubmit={props.handleSubmit}>\r\n            <div>\r\n                {createField<NewPostKeysType>('New Post Text', 'postText', MyTextarea, [maxLength70], null)}\r\n            </div>\r\n            <div>\r\n                <button>Add Post</button>\r\n            </div>\r\n        </form>\r\n    )\r\n}\r\n\r\nconst MyPostReduxForm = reduxForm<NewPostFormType, PropsType>({\r\n    form: 'login',\r\n})(MyPostForm)\r\n\r\ntype PostsFormType = {\r\n    addPost: (postText: string) => void\r\n}\r\nconst PostsForm: React.FC<PostsFormType> = (props) => {\r\n\r\n    const onSubmit = (formData: NewPostFormType) => {\r\n        props.addPost(formData.postText)\r\n    }\r\n\r\n    return (\r\n        <div>\r\n            <MyPostReduxForm onSubmit={onSubmit}/>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default PostsForm\r\n\r\ntype PropsType = {}\r\ntype NewPostFormType = {\r\n    postText: string\r\n}\r\ntype NewPostKeysType = getStringKeys<NewPostFormType>","import React from 'react'\r\nimport s from './Preloader.module.css'\r\n\r\nlet Preloader = () => {\r\n  return (\r\n    <img\r\n      className={s.loader}\r\n      src={'https://samherbert.net/svg-loaders/svg-loaders/puff.svg'}\r\n    />\r\n  )\r\n}\r\n\r\nexport default Preloader\r\n","import React, {FC} from 'react'\r\nimport s from './MyPosts.module.css'\r\nimport Post from './Post/Post'\r\nimport MyPostsForm from './MyPostsForm'\r\nimport Preloader from '../../common/Preloader/Preloader'\r\nimport {ProfileType} from \"../../../types/types\";\r\n\r\ntype PostsDataType = {\r\n    id: number\r\n    message: string\r\n}\r\ntype PropsType = {\r\n    profile: ProfileType | null\r\n    postsData: Array<PostsDataType>\r\n    addPost: (postText: string) => void\r\n}\r\nconst MyPosts: FC<PropsType> = React.memo(({profile, postsData, addPost}) => {\r\n  if (!profile) {\r\n    return <Preloader />\r\n  }\r\n  return (\r\n    <div className={s.postBlock}>\r\n      <h3>My posts</h3>\r\n      <div className={s.posts}>\r\n        {postsData.map((elem) => {\r\n          return (\r\n            <Post\r\n              message={elem.message}\r\n              key={elem.id}\r\n              img={profile.photos.large}\r\n            />\r\n          )\r\n        })}\r\n      </div>\r\n      <div>\r\n        <MyPostsForm addPost={addPost} />\r\n      </div>\r\n    </div>\r\n  )\r\n})\r\n\r\nexport default MyPosts\r\n","import React, {ChangeEvent, FC, useEffect, useState} from 'react'\r\nimport { NavLink } from 'react-router-dom'\r\nimport s from './ProfileHeader.module.css'\r\nimport {Input} from \"antd\";\r\n\r\ntype PropsType = {\r\n    status: string\r\n    updateStatus: (status: string) => void\r\n    isOwner: boolean\r\n}\r\nconst ProfileStatus: FC<PropsType> = (props) => {\r\n    let [editMode, setEditMode] = useState(false)\r\n    let [status, setStatus] = useState(props.status)\r\n\r\n    let activateEditMode = () => {\r\n        setEditMode(true)\r\n    }\r\n\r\n    let deActivateEditMode = () => {\r\n        setEditMode(false)\r\n        props.updateStatus(status)\r\n    }\r\n\r\n    const onStatusChange = (e: ChangeEvent<HTMLInputElement>) => {\r\n        setStatus(e.currentTarget.value)\r\n    }\r\n\r\n    useEffect(() => {\r\n        setStatus(props.status)\r\n    }, [props.status])\r\n\r\n    return (\r\n        <div className={s.profile__status}>\r\n            {!editMode && (\r\n                <div>\r\n                    {props.isOwner ?\r\n                        (<a onClick={activateEditMode}>\r\n                            {props.status || 'Set Status'}\r\n                        </a>) : (<span>\r\n                            {props.status || `This user did not set his status`}\r\n                        </span>)\r\n                    }\r\n                </div>\r\n            )}\r\n            {editMode && (\r\n                <div>\r\n                    <Input\r\n                        onChange={onStatusChange}\r\n                        autoFocus={true}\r\n                        onBlur={deActivateEditMode}\r\n                        value={status}\r\n                    />\r\n                </div>\r\n            )}\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default ProfileStatus\r\n","import {ProfileType} from \"../../../types/types\";\r\nimport React, {ChangeEvent} from \"react\";\r\nimport s from \"./ProfileHeader.module.css\";\r\nimport profilePhoto from \"../../../assets/images/profile.png\";\r\nimport ProfileStatus from \"./ProfileStatus\";\r\n\r\ntype ProfileHeaderPropsType = {\r\n    isOwner: boolean\r\n    profile: ProfileType\r\n    status: string\r\n\r\n    updateStatus: () => void\r\n    savePhoto: (file: File) => void\r\n}\r\nexport const ProfileHeader: React.FC<ProfileHeaderPropsType> = (props) => {\r\n    const {savePhoto, profile, isOwner, status, updateStatus} = props\r\n    const onMainPhotoSelected = (e: ChangeEvent<HTMLInputElement>) => {\r\n        if (e.target.files?.length) {\r\n            savePhoto(e.target.files[0])\r\n        }\r\n    }\r\n\r\n    return (\r\n        <div className={s.profile__header__container}>\r\n            <label className={s.avatar__container}>\r\n                <img src={profile.photos.large || profilePhoto}/>\r\n                {isOwner &&\r\n                < input type=\"file\" name=\"myfile\" style={{display: 'none'}} onChange={onMainPhotoSelected}/>}\r\n            </label>\r\n            <div>\r\n                <div className={s.profile__name}>{profile.fullName}</div>\r\n                <ProfileStatus\r\n                    isOwner={isOwner}\r\n                    status={status}\r\n                    updateStatus={updateStatus}\r\n                />\r\n            </div>\r\n        </div>\r\n    )\r\n}","import React from 'react'\r\nimport {InjectedFormProps, reduxForm} from 'redux-form'\r\nimport {createField, getStringKeys, MyInput} from '../../common/FormsControl/FormsControl'\r\nimport {ProfileType} from \"../../../types/types\";\r\nimport s from './ProfileInfo.module.css'\r\nimport {Button} from \"antd\";\r\n\r\ntype EditModeType = {\r\n    profile: ProfileType\r\n    submit: (formName: string) => void\r\n    saveData: (formData: ProfileType) => void\r\n}\r\nconst EditMode: React.FC<EditModeType> = ({profile, submit, saveData}) => {\r\n\r\n    const submitForm = (formData: ProfileType) => {\r\n        saveData(formData)\r\n    }\r\n\r\n    return (\r\n        <>\r\n            <EditModeFormRedux\r\n                submit={submit}\r\n                profile={profile}\r\n                initialValues={profile}\r\n                onSubmit={submitForm}\r\n            />\r\n        </>\r\n    )\r\n}\r\n\r\n\r\nconst EditModeForm: React.FC<InjectedFormProps<ProfileType, ProfileFormOwnPropsType> & ProfileFormOwnPropsType> =\r\n    ({handleSubmit, submit}) => {\r\n        return (\r\n            <form onSubmit={handleSubmit} className={`${s.profile__info__container}`}>\r\n                <div className={`${s.profile__contacts__container}`}>\r\n                    Full Name:\r\n                    {createField<ProfileFormValuesKeyType>('Full Name', 'fullName', MyInput, [], null)}\r\n                    About me:\r\n                    {createField<ProfileFormValuesKeyType>('About me', 'aboutMe', MyInput, [], null)}\r\n                    Job status:\r\n                    {createField<ProfileFormValuesKeyType>('Job status', 'lookingForAJobDescription', MyInput, [], null)}\r\n                </div>\r\n                <div className={`${s.profile__contacts__container}`}>\r\n                    Facebook:\r\n                    {createField('Your facebook profile', `contacts.facebook`, MyInput, [], null)}\r\n                    Instagram:\r\n                    {createField('Your instagram profile', `contacts.instagram`, MyInput, [], null)}\r\n                    Twitter:\r\n                    {createField('Your twitter profile', `contacts.twitter`, MyInput, [], null)}\r\n                    Github:\r\n                    {createField('Your github profile', `contacts.github`, MyInput, [], null)}\r\n                </div>\r\n                <div className={`${s.profile__contacts__container}`}>\r\n                    <Button onClick={() => {\r\n                        submit('profileForm')\r\n                    }} type={'primary'} block>Save Data</Button>\r\n                </div>\r\n            </form>\r\n        )\r\n    }\r\n\r\nconst EditModeFormRedux = reduxForm<ProfileType, ProfileFormOwnPropsType>({\r\n    form: 'profileForm',\r\n})(EditModeForm)\r\n\r\nexport default EditMode\r\n\r\n\r\ntype ProfileFormOwnPropsType = {\r\n    profile: ProfileType\r\n    submit: any\r\n}\r\ntype ProfileFormValuesKeyType = getStringKeys<ProfileType>","export default __webpack_public_path__ + \"static/media/facebook.4a455df5.png\";","export default __webpack_public_path__ + \"static/media/github.1c95b85d.png\";","export default __webpack_public_path__ + \"static/media/twitter.57573394.png\";","export default __webpack_public_path__ + \"static/media/instagram.a1950cc4.png\";","import React, {FC} from 'react'\r\nimport s from './ProfileInfo.module.css'\r\nimport EditMode from './EditMode'\r\nimport {ProfileType} from \"../../../types/types\";\r\nimport {Button} from \"antd\";\r\nimport facebookLogo from \"../../../assets/images/facebook.png\";\r\nimport githubLogo from \"../../../assets/images/github.png\";\r\nimport twitterLogo from \"../../../assets/images/twitter.png\";\r\nimport instagramLogo from \"../../../assets/images/instagram.png\";\r\n\r\n\r\ntype ProfileDataType = {\r\n    profile: ProfileType\r\n    isOwner: boolean\r\n    editMode: boolean\r\n\r\n    submit: () => void\r\n    saveData: () => void\r\n    toggleEditMode: () => void\r\n}\r\nconst ProfileInfo: React.FC<ProfileDataType> = (props) => {\r\n    return (\r\n        <>\r\n            {props.editMode ? (\r\n                <EditMode {...props} />\r\n            ) : (\r\n                <StaticProfileData {...props} />\r\n            )}\r\n        </>\r\n    )\r\n}\r\n\r\ntype StaticProfileDataPropsType = {\r\n    profile: ProfileType\r\n    isOwner: boolean\r\n    toggleEditMode: (arg: boolean) => void\r\n}\r\nconst StaticProfileData: FC<StaticProfileDataPropsType> = ({profile, toggleEditMode, isOwner}) => {\r\n    const {facebook, instagram, twitter, github} = profile.contacts\r\n\r\n    return (\r\n        <div className={s.profile__info__container}>\r\n            {isOwner && (\r\n                <Button type=\"default\" block onClick={() => {\r\n                    toggleEditMode(true)\r\n                }}\r\n                > Edit Details </Button>\r\n            )}\r\n            {(!profile.aboutMe && !profile.lookingForAJobDescription) ?\r\n                (<div className={s.profile__info__nodata}>This User did not add any info about himself</div>) :\r\n                ( <ul className={s.profile__info__list}>\r\n                    <li>About me<br/><span>{profile.aboutMe}</span></li>\r\n                    <li>Job status<br/><span>{profile.lookingForAJobDescription}</span></li>\r\n                </ul>)}\r\n\r\n            <div className={s.profile__contacts__container}>\r\n                <div>Contacts</div>\r\n                <div className={s.profile__contacts__list}>\r\n                    {facebook && <a href={`${facebook}`}><img src={facebookLogo}/></a>}\r\n                    {instagram && <a href={`${instagram}`}><img src={instagramLogo}/></a>}\r\n                    {twitter && <a href={`${twitter}`}><img src={twitterLogo}/></a>}\r\n                    {github && <a href={`${github}`}><img src={githubLogo}/></a>}\r\n                    {(!facebook && !instagram && !github && !twitter) &&\r\n                    (<div className={s.profile__contacts__nodata}>This User did not add any contact Information</div>)}\r\n                </div>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default ProfileInfo","import React, {ComponentType} from 'react'\r\nimport {\r\n    getProfileInfo,\r\n    getStatus,\r\n    updateStatus,\r\n    savePhoto,\r\n    actions,\r\n    saveData,\r\n} from '../../redux/profileReducer'\r\nimport {connect} from 'react-redux'\r\nimport {withRouter} from 'react-router'\r\nimport {withAuthRedirect} from '../../hoc/WithAuthRedirect'\r\nimport {compose} from 'redux'\r\nimport {submit} from 'redux-form'\r\nimport {AppStateType} from \"../../redux/reduxStore\"\r\nimport {PostDataType, ProfileType} from \"../../types/types\"\r\nimport MyPosts from \"./MyPosts/MyPosts\"\r\nimport {RouteComponentProps} from \"react-router-dom\"\r\nimport s from './ProfilePage.module.css'\r\nimport {ProfileHeader} from \"./ProfileHeader/ProfileHeader\";\r\nimport ProfileInfo from \"./ProfileInfo/ProfileInfo\";\r\nimport Preloader from \"../common/Preloader/Preloader\";\r\n\r\ntype PropsType = {\r\n    match: any\r\n    authorizedUserId: number\r\n    profile: ProfileType\r\n    status: string\r\n    editMode: boolean\r\n    postsData: Array<PostDataType>\r\n\r\n    submit: () => void\r\n    saveData: () => void\r\n    toggleEditMode: () => void\r\n    savePhoto: (file: File) => void\r\n    updateStatus: () => void\r\n    getProfileInfo: (userId: number) => void\r\n    getStatus: (userId: number) => void\r\n    addPost: (postText: string) => void\r\n}\r\ntype PathParamsType = {\r\n    userId: string\r\n}\r\n\r\nclass Profile extends React.Component<PropsType & RouteComponentProps<PathParamsType>> {\r\n\r\n    refreshProfile() {\r\n        let userId = +this.props.match.params.userId\r\n        if (!userId) {\r\n            userId = this.props.authorizedUserId\r\n        }\r\n        this.props.getProfileInfo(userId)\r\n        this.props.getStatus(userId)\r\n    }\r\n\r\n    componentDidMount() {\r\n        this.refreshProfile()\r\n    }\r\n\r\n    componentDidUpdate(prevProps: PropsType) {\r\n        if (this.props.match.params.userId !== prevProps.match.params.userId) {\r\n            this.refreshProfile()\r\n        }\r\n    }\r\n\r\n    render() {\r\n        if (!this.props.profile) {\r\n            return <Preloader/>\r\n        }\r\n\r\n        return (\r\n            <div className={s.profile__page}>\r\n                <ProfileHeader\r\n                    savePhoto={this.props.savePhoto}\r\n                    profile={this.props.profile}\r\n                    isOwner={!this.props.match.params.userId}\r\n                    status={this.props.status}\r\n                    updateStatus={this.props.updateStatus}\r\n                />\r\n                <ProfileInfo\r\n                    profile={this.props.profile}\r\n                    toggleEditMode={this.props.toggleEditMode}\r\n                    isOwner={!this.props.match.params.userId}\r\n                    editMode={this.props.editMode}\r\n                    saveData={this.props.saveData}\r\n                    submit={this.props.submit}\r\n                />\r\n                <MyPosts\r\n                    profile={this.props.profile}\r\n                    addPost={this.props.addPost}\r\n                    postsData={this.props.postsData}\r\n                />\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nconst mapStateToProps = (state: AppStateType) => ({\r\n    profile: state.profilePage.profile,\r\n    status: state.profilePage.status,\r\n    authorizedUserId: state.auth.id,\r\n    isAuth: state.auth.isAuth,\r\n    editMode: state.profilePage.editMode,\r\n    postsData: state.profilePage.postsData,\r\n})\r\n\r\nexport default compose<ComponentType>(\r\n    withAuthRedirect,\r\n    withRouter,\r\n    connect(mapStateToProps, {\r\n        submit,\r\n        getProfileInfo,\r\n        savePhoto,\r\n        getStatus,\r\n        updateStatus,\r\n        saveData,\r\n        toggleEditMode: actions.toggleEditMode,\r\n        addPost: actions.addPost\r\n    })\r\n)(Profile)\r\n","import {authMe} from './authReducer'\r\nimport { InferActionTypes} from \"./reduxStore\";\r\n\r\nlet initialState = {\r\n    initialized: false,\r\n    collapsed: false\r\n}\r\n\r\nconst appReducer = (state = initialState, action: ActionsType): InitialStateType => {\r\n    switch (action.type) {\r\n        case 'socialNetwork/app/INITIALIZED_SUCCESS':\r\n            return {\r\n                ...state,\r\n                initialized: true,\r\n            }\r\n\r\n        case \"socialNetwork/app/COLLAPSED_SUCCESS\" : {\r\n            return {\r\n                ...state,\r\n                collapsed: action.collapsed\r\n            }\r\n        }\r\n        default:\r\n            return state\r\n    }\r\n}\r\n\r\nexport const actions = {\r\n    initializedSuccess: () => ({type: 'socialNetwork/app/INITIALIZED_SUCCESS'} as const),\r\n    toggleCollapsedMode: (collapsed: boolean) => ({type: 'socialNetwork/app/COLLAPSED_SUCCESS', collapsed }as const)\r\n}\r\n\r\nexport const initializeApp = () => (dispatch: any) => {\r\n    let promise = dispatch(authMe())\r\n    Promise.all([promise]).then(() => {\r\n        dispatch(actions.initializedSuccess())\r\n    })\r\n}\r\n\r\nexport default appReducer\r\n\r\nexport type InitialStateType = typeof initialState\r\ntype ActionsType = InferActionTypes<typeof actions>\r\n// type ThunkType = DefaultThunkType<ActionsType>","export const updateObjectInArray = (\r\n  items: any,\r\n  itemId: any,\r\n  objPropsName: any,\r\n  newObjProps: any\r\n) => {\r\n  return items.map((u: any) => {\r\n    if (u[objPropsName] === itemId) {\r\n      return { ...u, ...newObjProps }\r\n    }\r\n    return u\r\n  })\r\n}\r\n","import {DefaultResponseType, instance} from \"./api\"\r\n\r\n\r\ntype UsersType = {\r\n    id: number\r\n    name: string\r\n    status: string\r\n    photos: {small: string, large: string}\r\n    followed: boolean\r\n}\r\ntype getUsersType = {\r\n    items: Array<UsersType>\r\n    totalCount: number\r\n    error: string | null\r\n}\r\nexport const usersAPI = {\r\n    getUsers(currentPage = 1, pageSize = 10, term: string= '', friend: null | boolean = null) {\r\n        return instance\r\n            .get<getUsersType>(`users?page=${currentPage}&count=${pageSize}&term=${term}` + (friend === null ? '' : `&friend=${friend}`) )\r\n            .then((response) => response.data)\r\n    },\r\n    unfollow(id: number) {\r\n        return instance.delete<DefaultResponseType>(`follow/${id}`).then((response) => response.data)\r\n    },\r\n    follow(id: number) {\r\n        return instance.post<DefaultResponseType>(`follow/${id}`, {}).then((response) => response.data)\r\n    },\r\n}","import {DefaultResponseType, ResultCodeEnum} from '../api/api'\r\nimport {updateObjectInArray} from '../utils/object-helpers'\r\nimport {UserType} from \"../types/types\";\r\nimport {DefaultThunkType, InferActionTypes} from \"./reduxStore\";\r\nimport {Dispatch} from \"redux\";\r\nimport {usersAPI} from \"../api/usersAPI\";\r\n\r\nlet initialState = {\r\n    users: [] as Array<UserType>,\r\n    pageSize: 16,\r\n    totalUsersCount: 0,\r\n    currentPage: 1,\r\n    isFetching: false,\r\n    followingInProgress: [] as Array<number>, //array of usersId\r\n    portionSize: 10,\r\n    filter: {\r\n        term: '',\r\n        friend: null as null | boolean\r\n    }\r\n}\r\n\r\nconst usersReducer = (state = initialState, action: ActionsTypes): InitialStateType => {\r\n    switch (action.type) {\r\n        case 'socialNetwork/users/FOLLOW':\r\n            return {\r\n                ...state,\r\n                users: updateObjectInArray(state.users, action.userId, 'id', {\r\n                    followed: true,\r\n                }),\r\n            }\r\n        case 'socialNetwork/users/UNFOLLOW':\r\n            return {\r\n                ...state,\r\n                users: updateObjectInArray(state.users, action.userId, 'id', {\r\n                    followed: false,\r\n                }),\r\n            }\r\n        case 'socialNetwork/users/SET_USERS':\r\n            return {...state, users: action.users}\r\n\r\n        case 'socialNetwork/users/SET_CURRENT_PAGE':\r\n            return {\r\n                ...state,\r\n                currentPage: action.currentPage,\r\n            }\r\n\r\n        case 'socialNetwork/users/SET_USERS_COUNT':\r\n            return {...state, totalUsersCount: action.totalUsers}\r\n\r\n        case 'socialNetwork/users/TOGGLE_IS_FETCHING':\r\n            return {...state, isFetching: action.isFetching}\r\n\r\n        case 'socialNetwork/users/SET_FILTER':\r\n            return {...state, filter: action.payload}\r\n\r\n        case 'socialNetwork/users/TOGGLE_IS_FOLLOWING_PROGRESS':\r\n            return {\r\n                ...state,\r\n                followingInProgress: action.followingInProgress\r\n                    ? [...state.followingInProgress, action.userId]\r\n                    : state.followingInProgress.filter((id) => id !== action.userId),\r\n            }\r\n\r\n        default:\r\n            return state\r\n    }\r\n}\r\n\r\nexport const actions = {\r\n    followSuccess: (userId: number) => ({\r\n        type: 'socialNetwork/users/FOLLOW',\r\n        userId,\r\n    } as const),\r\n    unfollowSuccess: (userId: number) => ({\r\n        type: 'socialNetwork/users/UNFOLLOW',\r\n        userId,\r\n    } as const),\r\n    setUsers: (users: Array<UserType>) => ({\r\n        type: 'socialNetwork/users/SET_USERS',\r\n        users,\r\n    } as const),\r\n    setFilter: (filter: FilterType) => ({\r\n        type: 'socialNetwork/users/SET_FILTER',\r\n        payload: filter,\r\n    } as const),\r\n    setCurrentPage: (currentPage: number) => ({\r\n        type: 'socialNetwork/users/SET_CURRENT_PAGE',\r\n        currentPage,\r\n    } as const),\r\n    setTotalUsersCount: (totalUsers: number) => ({\r\n        type: 'socialNetwork/users/SET_USERS_COUNT',\r\n        totalUsers,\r\n    } as const),\r\n    toggleIsFetching: (isFetching: boolean) => ({\r\n        type: 'socialNetwork/users/TOGGLE_IS_FETCHING',\r\n        isFetching,\r\n    } as const),\r\n    toggleIsFollowingProgress: (followingInProgress: boolean, userId: number) => ({\r\n        type: 'socialNetwork/users/TOGGLE_IS_FOLLOWING_PROGRESS',\r\n        followingInProgress,\r\n        userId,\r\n    } as const)\r\n}\r\n\r\nexport const requestUsers = (currentPage: number, pageSize: number, filter: FilterType): ThunkType => {\r\n    return async (dispatch) => {\r\n\r\n        dispatch(actions.toggleIsFetching(true))\r\n        dispatch(actions.setCurrentPage(currentPage))\r\n        dispatch(actions.setFilter(filter))\r\n        let data = await usersAPI.getUsers(currentPage, pageSize, filter.term, filter.friend)\r\n        dispatch(actions.setUsers(data.items))\r\n        dispatch(actions.setTotalUsersCount(data.totalCount))\r\n        dispatch(actions.toggleIsFetching(false))\r\n    }\r\n}\r\n\r\nconst _followUnfollowFlow = async (dispatch: DispatchType, userId: number,\r\n                                   apiMethod: (userId: number) => Promise<DefaultResponseType>,\r\n                                   actionCreator: (userId: number) => ActionsTypes) => {\r\n    dispatch(actions.toggleIsFollowingProgress(true, userId))\r\n    let response = await apiMethod(userId)\r\n    if (response.resultCode === ResultCodeEnum.success) {\r\n        dispatch(actionCreator(userId))\r\n    }\r\n    dispatch(actions.toggleIsFollowingProgress(false, userId))\r\n}\r\n\r\nexport const follow = (userId: number): ThunkType => {\r\n    return async (dispatch) => {\r\n        await _followUnfollowFlow(\r\n            dispatch,\r\n            userId,\r\n            usersAPI.follow.bind(userId),\r\n            actions.followSuccess\r\n        )\r\n    }\r\n}\r\n\r\nexport const unfollow = (userId: number): ThunkType => {\r\n    return async (dispatch) => {\r\n        await _followUnfollowFlow(\r\n            dispatch,\r\n            userId,\r\n            usersAPI.unfollow.bind(userId),\r\n            actions.unfollowSuccess\r\n        )\r\n    }\r\n}\r\n\r\nexport default usersReducer\r\n\r\ntype ActionsTypes = InferActionTypes<typeof actions>\r\ntype DispatchType = Dispatch<ActionsTypes>\r\ntype ThunkType = DefaultThunkType<ActionsTypes>\r\nexport type FilterType = typeof initialState.filter\r\nexport type InitialStateType = typeof initialState\r\n","import {Action, applyMiddleware, combineReducers, compose, createStore} from 'redux'\r\nimport authReducer from './authReducer'\r\nimport dialogsReducer from './dialogsReducer'\r\nimport profileReducer from './profileReducer'\r\nimport usersReducer from './usersReducer'\r\nimport thunkMiddleware, {ThunkAction} from 'redux-thunk'\r\nimport { reducer as formReducer } from 'redux-form'\r\nimport appReducer from './appReducer'\r\nimport chatReducer from \"./chatReducer\";\r\n\r\nlet rootReducer = combineReducers({\r\n  dialogsPage: dialogsReducer,\r\n  profilePage: profileReducer,\r\n  usersPage: usersReducer,\r\n  auth: authReducer,\r\n  form: formReducer,\r\n  app: appReducer,\r\n  chat: chatReducer\r\n})\r\ntype RootReducerType = typeof rootReducer\r\nexport type AppStateType = ReturnType<RootReducerType>\r\n\r\nexport type InferActionTypes<T> = T extends  {[key: string]:  (...args: any[]) => infer U} ? U : never\r\n\r\nexport type DefaultThunkType<A extends Action> = ThunkAction<Promise<void>, AppStateType, unknown, A>\r\n\r\n// @ts-ignore\r\nconst composeEnhancers = window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__ || compose\r\nconst store = createStore(\r\n  rootReducer,\r\n  composeEnhancers(applyMiddleware(thunkMiddleware))\r\n)\r\n\r\n// @ts-ignore\r\nwindow.__store__ = store\r\n\r\nexport default store\r\n","import React, {ComponentType, Suspense} from 'react'\r\nimport Preloader from '../components/common/Preloader/Preloader'\r\n\r\nexport function LazyLoading<WCP>(WrappedComponent: ComponentType<WCP>) {\r\n  return (props: WCP) => {\r\n    return (\r\n      <>\r\n        <Suspense fallback={<Preloader />}>\r\n          <WrappedComponent {...props} />\r\n        </Suspense>\r\n      </>\r\n    )\r\n  }\r\n}\r\n\r\nexport default LazyLoading\r\n","import React from 'react'\r\nimport styles from './Pagination.module.css'\r\n\r\ntype PropsType = {\r\n  totalItemsCount: number\r\n  pageSize: number\r\n  currentPage: number\r\n  onPageChanged: (currentPage: number ) => void\r\n}\r\n\r\nlet Pagination: React.FC<PropsType> = ({\r\n  totalItemsCount,\r\n  pageSize,\r\n  currentPage,\r\n  onPageChanged,\r\n}) => {\r\n  let pagesCount = Math.ceil(totalItemsCount / pageSize)\r\n\r\n  let before: number   = currentPage - 1\r\n  before = before < 1 ? 1 : before\r\n  let after: number  = currentPage + 1\r\n  after = after >= pagesCount ? pagesCount : after\r\n\r\n  return (\r\n    <div className={styles.paginator}>\r\n      {/* pagination */}\r\n      {/* first page */}\r\n      <div>\r\n        {currentPage === 1 ? null : (\r\n          <>\r\n            <span\r\n              onClick={() => {\r\n                onPageChanged(1)\r\n              }}\r\n            >\r\n              {1}\r\n            </span>\r\n            <span>...</span>\r\n          </>\r\n        )}\r\n\r\n        {/* first page */}\r\n        {/* before current page */}\r\n        <span\r\n          onClick={() => {\r\n            onPageChanged(before)\r\n          }}\r\n        >\r\n          {currentPage < 3 ? null : <span>{before}</span>}\r\n        </span>\r\n        {/* before current page */}\r\n        {/* current page */}\r\n        <span>\r\n          {currentPage < 3 ? null : <span>..</span>}\r\n          <span className={styles.selectedPage}>{currentPage}</span>\r\n          {currentPage > pagesCount - 2 ? null : <span>..</span>}\r\n        </span>\r\n        {/* current page */}\r\n        {/* after current page */}\r\n        {after === pagesCount ? null : (\r\n          <>\r\n            <span\r\n              onClick={() => {\r\n                onPageChanged(after)\r\n              }}\r\n            >\r\n              {after}\r\n            </span>\r\n          </>\r\n        )\r\n}\r\n\r\n        {/* after current page */}\r\n        {/* last page */}\r\n        {currentPage === pagesCount ? null : (\r\n          <>\r\n            <span>...</span>\r\n            <span\r\n              onClick={() => {\r\n                onPageChanged(pagesCount)\r\n              }}\r\n            >\r\n              {pagesCount}\r\n            </span>\r\n          </>\r\n        )}\r\n        {/* last page */}\r\n      </div>\r\n      {/* pagination */}\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default Pagination\r\n","import React, {FC} from 'react'\r\nimport {NavLink} from 'react-router-dom'\r\nimport styles from './Users.module.css'\r\nimport {UserType} from \"../../types/types\";\r\n\r\n\r\ntype PropsType = {\r\n    user: UserType\r\n    followingInProgress: Array<number>\r\n    follow: (userId: number) => void\r\n    unfollow: (userId: number) => void\r\n    isAuth: boolean\r\n}\r\nlet User: FC<PropsType> = ({user, followingInProgress, unfollow, follow, isAuth}) => {\r\n    return (\r\n        <div className={styles.userContainer}>\r\n            <div>\r\n                <NavLink to={`/profile/${user.id}`}>\r\n                    <img\r\n                        src={\r\n                            user.photos.small != null\r\n                                ? user.photos.small\r\n                                : 'https://www.pavilionweb.com/wp-content/uploads/2017/03/man-300x300.png'\r\n                        }\r\n                        alt='userPhoto'\r\n                        className={styles.userPhoto}\r\n                    />\r\n                </NavLink>\r\n            </div>\r\n            {isAuth && (\r\n                <div>\r\n                    {user.followed ? (\r\n                        <button\r\n                            disabled={followingInProgress.some((id) => id === user.id)}\r\n                            onClick={() => {\r\n                                unfollow(user.id)\r\n                            }}\r\n                        >\r\n                            Unfollow\r\n                        </button>\r\n                    ) : (\r\n                        <button\r\n                            disabled={followingInProgress.some((id) => id === user.id)}\r\n                            onClick={() => {\r\n                                follow(user.id)\r\n                            }}\r\n                        >\r\n                            Follow\r\n                        </button>\r\n                    )}\r\n                </div>\r\n            )}\r\n            <div className={styles.userDescription}>\r\n                <div>{user.name}</div>\r\n                <div>{user.status}</div>\r\n            </div>\r\n\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default User\r\n","import { createSelector } from 'reselect'\r\nimport {AppStateType} from \"../reduxStore\";\r\n\r\n\r\nconst getUsersSelector = (state: AppStateType) => {\r\n  return state.usersPage.users\r\n}\r\n\r\nexport const getUsersData = createSelector(getUsersSelector, (users) => {\r\n  return users.filter((u) => true)\r\n})\r\n\r\nexport const getPageSize = (state: AppStateType) => {\r\n  return state.usersPage.pageSize\r\n}\r\nexport const getTotalUsersCount = (state: AppStateType) => {\r\n  return state.usersPage.totalUsersCount\r\n}\r\nexport const getCurrentPage = (state: AppStateType) => {\r\n  return state.usersPage.currentPage\r\n}\r\nexport const getIsFetching = (state: AppStateType) => {\r\n  return state.usersPage.isFetching\r\n}\r\nexport const getFollowingInProgress = (state: AppStateType) => {\r\n  return state.usersPage.followingInProgress\r\n}\r\nexport const getPortionSize = (state: AppStateType) => {\r\n  return state.usersPage.portionSize\r\n}\r\n\r\nexport const getIsAuth = (state: AppStateType) => {\r\n  return state.auth.isAuth\r\n}\r\n\r\nexport const getUsersFilter = (state: AppStateType) => {\r\n  return state.usersPage.filter\r\n}","import {Field, Form, Formik} from \"formik\";\r\nimport React from \"react\";\r\nimport {FilterType} from \"../../redux/usersReducer\";\r\nimport {useSelector} from \"react-redux\";\r\nimport {getUsersFilter} from \"../../redux/Selectors/usersSelectors\";\r\n\r\nconst userSearchForms = (values: FormType) => {\r\n    const errors = {};\r\n    return errors;\r\n}\r\n\r\ntype FriendFormType = 'true' | 'false' | 'null';\r\ntype FormType = {\r\n    term: string,\r\n    friend: FriendFormType\r\n}\r\ntype UserSearchFormPropsType = {\r\n    onFilterChanged: (filter: FilterType) => void\r\n}\r\nexport const UserSearchForm: React.FC<UserSearchFormPropsType> = ({onFilterChanged}) => {\r\n\r\n    const filter = useSelector(getUsersFilter)\r\n\r\n    const submit = (values: FormType) => {\r\n        const filter: FilterType = {\r\n            term: values.term,\r\n            friend: values.friend === 'null' ? null\r\n                : values.friend === 'true' ? true : false\r\n        }\r\n        onFilterChanged(filter)\r\n    }\r\n\r\n    return (\r\n        <div>\r\n            <Formik\r\n                enableReinitialize={true}\r\n                initialValues={{term: filter.term, friend: String(filter.friend) as FriendFormType}}\r\n                validate={userSearchForms}\r\n                onSubmit={submit}\r\n            >\r\n                {({isSubmitting}) => (\r\n                    <Form>\r\n                        <Field type=\"text\" name=\"term\"/>\r\n                        <Field as=\"select\" name=\"friend\">\r\n                            <option value=\"null\">All</option>\r\n                            <option value=\"true\">Only Followed</option>\r\n                            <option value=\"false\">Only Unfollowed</option>\r\n                        </Field>\r\n                        <button type=\"submit\" disabled={isSubmitting}>\r\n                            Find\r\n                        </button>\r\n                    </Form>\r\n                )}\r\n            </Formik>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default UserSearchForm","import React, {useEffect} from 'react'\r\nimport Pagination from '../common/Pagination/Pagination'\r\nimport User from './User'\r\nimport UserSearchForm from \"./UserSearchForms\"\r\nimport {actions, FilterType, follow, requestUsers, unfollow} from \"../../redux/usersReducer\"\r\nimport {useDispatch, useSelector} from \"react-redux\"\r\nimport {\r\n    getCurrentPage,\r\n    getFollowingInProgress,\r\n    getIsAuth, getIsFetching, getPageSize,\r\n    getTotalUsersCount,\r\n    getUsersData, getUsersFilter\r\n} from \"../../redux/Selectors/usersSelectors\"\r\nimport {useHistory} from \"react-router-dom\";\r\nimport Preloader from \"../common/Preloader/Preloader\";\r\nimport * as queryString from \"querystring\";\r\n\r\nexport const Users = () => {\r\n\r\n    const users = useSelector(getUsersData)\r\n    const totalUsersCount = useSelector(getTotalUsersCount)\r\n    const isAuth = useSelector(getIsAuth)\r\n    const followingInProgress = useSelector(getFollowingInProgress)\r\n    const currentPage = useSelector(getCurrentPage)\r\n    const pageSize = useSelector(getPageSize)\r\n    const filter = useSelector(getUsersFilter)\r\n    const isFetching = useSelector(getIsFetching)\r\n\r\n    const dispatch = useDispatch()\r\n    const history = useHistory()\r\n\r\n    useEffect(() => {\r\n        let actualPage = currentPage\r\n        let actualFilter = filter\r\n\r\n        const parsed = queryString.parse(history.location.search.slice(1))\r\n        if (parsed.page) actualPage = +parsed.page\r\n        if (parsed.term) actualFilter = {...actualFilter, term: parsed.term as string}\r\n        if (parsed.friend) actualFilter = {...actualFilter, friend: parsed.friend === 'null' ? null :\r\n                parsed.friend === 'true' ? true :\r\n                    false\r\n        }\r\n\r\n        dispatch(requestUsers(actualPage, pageSize, actualFilter))\r\n    }, [])\r\n\r\n    useEffect(() => {\r\n        history.push({\r\n            pathname: './users',\r\n            search: `?term=${filter.term}&friend=${filter.friend}&page=${currentPage}`\r\n        })\r\n    }, [filter, currentPage])\r\n\r\n\r\n\r\n    const onPageChanged = (currentPage: number) => {\r\n        dispatch(actions.setCurrentPage(currentPage))\r\n        dispatch(requestUsers(currentPage, pageSize, filter))\r\n    }\r\n\r\n    const onFilterChanged = (filter: FilterType) => {\r\n        dispatch(requestUsers(1, pageSize, filter))\r\n    }\r\n\r\n    const followUser = (userID: number) => {\r\n        dispatch(follow(userID))\r\n    }\r\n\r\n    const unfollowUser = (userID: number) => {\r\n        dispatch(unfollow(userID))\r\n    }\r\n\r\n    return <>\r\n        {isFetching ? <Preloader/> : (\r\n            <div>\r\n                <UserSearchForm onFilterChanged={onFilterChanged}/>\r\n                <Pagination\r\n                    currentPage={currentPage}\r\n                    onPageChanged={onPageChanged}\r\n                    totalItemsCount={totalUsersCount}\r\n                    pageSize={pageSize}\r\n                />\r\n                {users.map((u) => (\r\n                    <User\r\n                        user={u}\r\n                        key={u.id}\r\n                        followingInProgress={followingInProgress}\r\n                        unfollow={unfollowUser}\r\n                        follow={followUser}\r\n                        isAuth={isAuth}\r\n                    />\r\n                ))}\r\n            </div>\r\n        )}\r\n    </>\r\n}\r\n","import {AppStateType} from \"../reduxStore\";\r\n\r\nexport const getAuthFetching = (state: AppStateType) =>  state.auth.isFetching\r\n\r\nexport const getLogin = (state: AppStateType) => state.auth.login\r\n","import React from 'react'\r\nimport Preloader from '../common/Preloader/Preloader'\r\nimport s from './Header.module.css'\r\nimport {Avatar, Button, Col, Menu, Row} from \"antd\";\r\nimport {MessageOutlined, SettingOutlined,\r\n    UsergroupDeleteOutlined, UserOutlined, WechatOutlined} from \"@ant-design/icons\";\r\nimport {Header} from \"antd/es/layout/layout\";\r\nimport {useDispatch, useSelector} from \"react-redux\";\r\nimport {getAuthFetching, getLogin} from \"../../redux/Selectors/headerSelectors\";\r\nimport {getIsAuth} from \"../../redux/Selectors/usersSelectors\";\r\nimport {userLogOut} from \"../../redux/authReducer\";\r\nimport {NavLink} from \"react-router-dom\";\r\n\r\nexport const AppHeader = () => {\r\n\r\n    const isFetching = useSelector(getAuthFetching)\r\n    const isAuth = useSelector(getIsAuth)\r\n    const login = useSelector(getLogin)\r\n\r\n    const dispatch = useDispatch()\r\n\r\n    const LogOut = () => {\r\n        dispatch(userLogOut())\r\n    }\r\n\r\n    return (\r\n        <>\r\n            {isFetching ? <Preloader/> : (\r\n                <Header className=\"site-layout-background\" style={{padding: 0}}>\r\n                    {isAuth ? (\r\n                        <Row>\r\n                            <Col span={18}>\r\n                                <Menu theme=\"dark\" mode=\"horizontal\" className={s.altMenu}>\r\n                                    <Menu.Item key=\"1\" className={s.altMenuItem}>\r\n                                        <NavLink to=\"/profile\">\r\n                                            <UserOutlined style={{fontSize: '19px'}}/>\r\n                                        </NavLink>\r\n                                    </Menu.Item>\r\n                                    <Menu.Item key=\"2\" className={s.altMenuItem}>\r\n                                        <NavLink to=\"/dialogs\">\r\n                                            <MessageOutlined style={{fontSize: '19px'}}/>\r\n                                        </NavLink>\r\n                                    </Menu.Item>\r\n                                    <Menu.Item key=\"3\" className={s.altMenuItem}>\r\n                                        <NavLink to=\"/users\">\r\n                                            <UsergroupDeleteOutlined style={{fontSize: '19px'}}/>\r\n                                        </NavLink>\r\n                                    </Menu.Item>\r\n                                    <Menu.Item key=\"4\" className={s.altMenuItem}>\r\n                                        <NavLink to=\"/settings\">\r\n                                            <SettingOutlined style={{fontSize: '19px'}}/>\r\n                                        </NavLink>\r\n                                    </Menu.Item>\r\n                                    <Menu.Item key=\"5\" className={s.altMenuItem}>\r\n                                        <NavLink to=\"/chat\">\r\n                                            <WechatOutlined style={{fontSize: '19px'}}/>\r\n                                        </NavLink>\r\n                                    </Menu.Item>\r\n                                </Menu>\r\n                            </Col>\r\n                            <Col span={6} className={s.loginBlock}>\r\n                                <div>\r\n                                    <span className={s.hiddenLoginBlock}>\r\n                                        <Avatar style={{backgroundColor: '#87d068'}} icon={<UserOutlined/>}/>\r\n                                        <span className={s.nickName}>{login}</span>\r\n                                    </span>\r\n                                    <Button onClick={() => LogOut()}>Logout</Button>\r\n                                </div>\r\n                            </Col>\r\n                        </Row>\r\n                    ) : null}\r\n                </Header>\r\n            )}\r\n        </>\r\n\r\n    )\r\n}\r\n","import React, {Component, ComponentType} from 'react'\nimport {HashRouter, NavLink, Redirect, Route, withRouter} from 'react-router-dom'\nimport './App.css'\nimport DialogsContainer from './components/Dialogs/DialogsContainer'\nimport {LoginPage} from './components/Login/LoginPage'\nimport Profile from './components/Profile/ProfilePage'\nimport {connect, Provider} from 'react-redux'\nimport {compose} from 'redux'\nimport {initializeApp} from './redux/appReducer'\nimport Preloader from './components/common/Preloader/Preloader'\nimport store, {AppStateType} from './redux/reduxStore'\nimport LazyLoading from './hoc/LazyLoading'\nimport {Users} from \"./components/Users/Users\"\nimport 'antd/dist/antd.css'\nimport {Layout, Menu} from 'antd';\nimport {UserOutlined} from '@ant-design/icons';\nimport {AppHeader} from \"./components/Header/Header\";\n\nconst {SubMenu} = Menu;\nconst {Content, Footer, Sider} = Layout;\n\nconst SettingsContainer = React.lazy(() => import('./components/Settings/Settings'))\nconst ChatPage = React.lazy(() => import('./pages/Chat/Chat'))\n\nconst LazyChat = LazyLoading(ChatPage)\nconst LazySettings = LazyLoading(SettingsContainer)\n\n\ntype MapPropsType = ReturnType<typeof mapStateToProps>\ntype DispatchPropsType = {\n    initializeApp: () => void\n    toggleCollapseMode: (collapsed: boolean) => void\n}\n\nclass App extends Component<MapPropsType & DispatchPropsType> {\n\n    catchAllUnhandledErrors = (e: PromiseRejectionEvent) => {\n        alert('Some error occurred')\n    }\n\n    componentDidMount() {\n        this.props.initializeApp()\n        window.addEventListener('unhandledrejection', this.catchAllUnhandledErrors)\n    }\n\n    componentWillUnmount() {\n        window.removeEventListener(\n            'unhandledrejection',\n            this.catchAllUnhandledErrors\n        )\n\n\n    }\n\n    render() {\n        if (!this.props.initialized) return <Preloader/>\n\n        return (\n            <Layout>\n                <AppHeader/>\n                <Content className='main__container'>\n                    <Layout className=\"site-layout-background\">\n                        {this.props.isAuth ? (\n                            <Sider className=\"site-layout-background navbar\" width={200} style={{padding: '0'}}>\n                                <Menu\n                                    mode=\"inline\"\n                                    defaultOpenKeys={['sub1']}\n                                    style={{height: '100%'}}\n                                >\n                                    <SubMenu key=\"sub1\" icon={<UserOutlined/>} title=\"Profile\">\n                                        <Menu.Item key=\"1\">\n                                            <NavLink to=\"/profile\">My Profile</NavLink>\n                                        </Menu.Item>\n                                        <Menu.Item key=\"2\">\n                                            <NavLink to=\"/dialogs\">Messages</NavLink>\n                                        </Menu.Item>\n                                        <Menu.Item key=\"3\">\n                                            <NavLink to=\"/chat\">Common Chat</NavLink>\n                                        </Menu.Item>\n                                    </SubMenu>\n                                    <Menu.Item key=\"4\">\n                                        <NavLink to=\"/users\">Find Users</NavLink>\n                                    </Menu.Item>\n                                    <Menu.Item key=\"5\">\n                                        <NavLink to=\"/settings\">Settings</NavLink>\n                                    </Menu.Item>\n                                </Menu>\n                            </Sider>\n                        ) : null}\n                        <Content style={{minHeight: 280}}>\n                            <Route exact path=\"/\" render={() => <Redirect to={'/profile'}/>}/>\n                            <Route path=\"/dialogs\" render={() => <DialogsContainer/>}/>\n                            <Route path=\"/profile/:userId?\" render={() => <Profile/>}/>\n                            <Route path=\"/settings\" render={() => <LazySettings/>}/>\n                            <Route path=\"/users\" render={() => <Users/>}/>\n                            <Route path=\"/login\" render={() => <LoginPage/>}/>\n                            <Route path=\"/chat\" render={() => <LazyChat/>}/>\n                        </Content>\n                    </Layout>\n                </Content>\n                <Footer style={{textAlign: 'center'}}>Rogoznec Maxim Social Network 2022</Footer>\n            </Layout>\n        )\n    }\n}\n\nconst mapStateToProps = (state: AppStateType) => ({\n    initialized: state.app.initialized,\n    collapsed: state.app.collapsed,\n    isAuth: state.auth.isAuth\n})\n\nlet AppContainer = compose<ComponentType>(\n    withRouter,\n    connect(mapStateToProps, {initializeApp})\n)(App)\n\nconst SamuraiJSApp: React.FC = () => {\n    return (\n        <React.StrictMode>\n            <HashRouter>\n                <Provider store={store}>\n                    <AppContainer/>\n                </Provider>\n            </HashRouter>\n        </React.StrictMode>\n    )\n}\n\nexport default SamuraiJSApp\n","import reportWebVitals from './reportWebVitals'\nimport React from 'react'\nimport ReactDOM from 'react-dom'\nimport './index.css'\nimport SamuraiJSApp from './App'\n\nReactDOM.render(<SamuraiJSApp />, document.getElementById('root'))\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals()\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"dialogs\":\"Dialogs_dialogs__35PTw\",\"dialogsItems\":\"Dialogs_dialogsItems__1LdbS\",\"addBlock\":\"Dialogs_addBlock__i-3rP\",\"message\":\"Dialogs_message__2SLPD\",\"dialog\":\"Dialogs_dialog__1PfVP\",\"item\":\"Dialogs_item__2dk7t\",\"name\":\"Dialogs_name__1ILBM\",\"activeLink\":\"Dialogs_activeLink__2eZtc\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"nickName\":\"Header_nickName__342Lj\",\"altMenuItem\":\"Header_altMenuItem__2w-Wg\",\"loginBlock\":\"Header_loginBlock__3SCHH\",\"hiddenLoginBlock\":\"Header_hiddenLoginBlock__DZ5U2\",\"altMenu\":\"Header_altMenu__3CuG_\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"profile__header__container\":\"ProfileHeader_profile__header__container__3-jL6\",\"avatar__container\":\"ProfileHeader_avatar__container__3t-pn\",\"profile__name\":\"ProfileHeader_profile__name__zFppC\",\"profile__status\":\"ProfileHeader_profile__status__25LvE\"};"],"sourceRoot":""}