(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{130:function(e,t,n){e.exports={message:"Message_message__37xmZ"}},133:function(e,t,n){e.exports={loader:"Preloader_loader__lWjDE"}},135:function(e,t,n){e.exports={userPhoto:"Users_userPhoto__2YoK6",selectedPage:"Users_selectedPage__22Fmw"}},167:function(e,t,n){},168:function(e,t,n){},24:function(e,t,n){e.exports={nav:"Navbar_nav__3Ojas",item:"Navbar_item__2EV0a",activeLink:"Navbar_activeLink__1VQ0J"}},291:function(e,t,n){"use strict";n.r(t);var a=function(e){e&&e instanceof Function&&n.e(4).then(n.bind(null,292)).then((function(t){var n=t.getCLS,a=t.getFID,s=t.getFCP,r=t.getLCP,c=t.getTTFB;n(e),a(e),s(e),r(e),c(e)}))},s=n(1),r=n.n(s),c=n(67),i=n.n(c),o=(n(167),n(27)),u=n(28),l=n(30),d=n(29),j=n(11),f=n(16),p=(n(168),n(43)),b=n(3),m="ADD-MESSAGE",h={messagesData:[{id:1,message:"Hi"},{id:2,message:"How are you?"},{id:3,message:"42"}],dialogsData:[{id:1,name:"Dima",img:"https://meragor.com/files/styles//ava_800_800_wm/standoff_162.jpg"},{id:2,name:"Andrey",img:"https://avatars.mds.yandex.net/get-zen_doc/3512693/pub_5efb3ff066fe1d5006536937_5efb4be4cdd4d637ce0fd2e8/scale_1200"},{id:3,name:"Maxim",img:"https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcTn8H3mqnU943_lgdPtj-JIGRjyKAlp3FSLzg&usqp=CAU"},{id:4,name:"Ghena",img:"https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcSx5wghphVB-NTZeDHzsjPFUGY2_V-yPNnq1g&usqp=CAU"},{id:5,name:"Renat",img:"http://pristor.ru/wp-content/uploads/2019/01/%D0%A8%D0%B8%D0%BA%D0%B0%D1%80%D0%BD%D1%8B%D0%B5-%D0%B0%D0%B2%D0%B0%D1%82%D0%B0%D1%80%D0%BA%D0%B8-%D0%B4%D0%BB%D1%8F-%D0%92%D0%9A%D0%BE%D0%BD%D1%82%D0%B0%D0%BA%D1%82%D0%B5-%D0%B4%D0%B5%D0%B2%D1%83%D1%88%D0%BA%D0%B0%D0%BC-%D0%B8-%D0%B4%D0%B5%D0%B2%D0%BE%D1%87%D0%BA%D0%B0%D0%BC-%D0%BF%D0%BE%D0%B4%D0%B1%D0%BE%D1%80%D0%BA%D0%B0-4.jpg"},{id:6,name:"Sasha",img:"https://cs-love.net/avatars/images/cs-love-avatar-0.jpg"},{id:7,name:"Victor",img:"https://sovietgames.su/wp-content/uploads/2016/07/%D0%90%D0%B2%D0%B0%D1%82%D0%B0%D1%80%D0%BA%D0%B0.jpg"}]},O=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:h,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case m:return Object(b.a)(Object(b.a)({},e),{},{messagesData:[].concat(Object(p.a)(e.messagesData),[{id:1,message:t.newMessageBoddy}])});default:return e}},g=n(56),x=n.n(g),v=n(57),_=n.n(v),D=n(0),P=function(e){return Object(D.jsx)("div",{className:_.a.dialog,children:Object(D.jsx)(f.b,{to:"/dialogs/".concat(e.id),activeClassName:_.a.activeLink,children:Object(D.jsxs)("div",{className:_.a.item,children:[Object(D.jsx)("img",{src:e.img}),Object(D.jsx)("div",{className:_.a.name,children:e.name})]})})})},y=n(130),N=n.n(y),w=function(e){return Object(D.jsx)("div",{className:N.a.message,children:e.message})},B=n(127),S=n(128),I=n(44),k=n(53),C=n.n(k),A=function(e){e.input;var t=e.meta,n=(e.child,Object(I.a)(e,["input","meta","child"])),a=t.error&&t.touched;return Object(D.jsxs)("div",{className:"".concat(C.a.formControl," ").concat(a?C.a.err:""),children:[Object(D.jsx)("div",{children:n.children}),a&&Object(D.jsx)("span",{children:t.error})]})},E=function(e){var t=e.input,n=(e.meta,e.child,Object(I.a)(e,["input","meta","child"]));return Object(D.jsx)(A,Object(b.a)(Object(b.a)({},e),{},{children:Object(D.jsx)("textarea",Object(b.a)(Object(b.a)({},t),n))}))},F=function(e){var t=e.input,n=(e.meta,e.child,Object(I.a)(e,["input","meta","child"]));return Object(D.jsx)(A,Object(b.a)(Object(b.a)({},e),{},{children:Object(D.jsx)("input",Object(b.a)(Object(b.a)({},t),n))}))},T=function(e,t,n,a,s){var r=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"",c=arguments.length>6&&void 0!==arguments[6]?arguments[6]:{};return Object(D.jsxs)("div",{children:[Object(D.jsx)(B.a,Object(b.a)({placeholder:e,name:t,component:n,validate:a,type:s},c)),r]})},U=function(e){if(!e)return"Field is required"},L=function(e){return function(t){if(t&&t.length>e)return"Max length is ".concat(e," symbols")}},M=L(100),z=Object(S.a)({form:"dialogAddMessageForm"})((function(e){return Object(D.jsxs)("form",{onSubmit:e.handleSubmit,children:[Object(D.jsx)(B.a,{component:E,name:"newMessageBoddy",validate:[U,M]}),Object(D.jsx)("button",{children:"Send"})]})})),G=function(e){var t=e.dialogsPage.dialogsData.map((function(e){return Object(D.jsx)(P,{id:e.id,name:e.name,img:e.img},e.id)})),n=e.dialogsPage.messagesData.map((function(e){return Object(D.jsx)(w,{message:e.message},e.id)}));return Object(D.jsxs)("div",{className:x.a.dialogs,children:[Object(D.jsx)("div",{className:x.a.dialogsItems,children:t}),Object(D.jsxs)("div",{className:x.a.messages,children:[n,Object(D.jsx)("div",{className:x.a.addBlock,children:Object(D.jsx)(z,{onSubmit:function(t){e.addMessgeBtt(t.newMessageBoddy)}})})]})]})},J=n(13),R=n(48),H=n(8),V=Object(H.d)(Object(J.b)((function(e){return{dialogsPage:e.dialogsPage}}),(function(e){return{addMessgeBtt:function(t){e(function(e){return{type:m,newMessageBoddy:e}}(t))}}})),R.a)(G),q=n(133),K=n.n(q),W=function(){return Object(D.jsx)("img",{className:K.a.loader,src:"https://samherbert.net/svg-loaders/svg-loaders/puff.svg"})},Y=n(72),X=n.n(Y),Z=function(e){return Object(D.jsx)("header",{className:X.a.header,children:e.isFetching?Object(D.jsx)(W,{}):Object(D.jsx)("div",{className:X.a.loginBlock,children:e.isAuth?Object(D.jsxs)("div",{children:[Object(D.jsx)("div",{children:e.login}),Object(D.jsx)("div",{children:Object(D.jsx)(f.b,{to:"/login",className:X.a.login,onClick:function(){e.userLogOut()},children:"Logout"})})]}):Object(D.jsx)(f.b,{to:"/login",children:"Login"})})})},Q=n(12),$=n.n(Q),ee=n(15),te=n(134).create({withCredentials:!0,headers:{"API-KEY":"8a9d7844-8f01-425a-adf0-76c5abdfd30b"},baseURL:"https://social-network.samuraijs.com/api/1.0/"}),ne={getUsers:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10;return te.get("users?page=".concat(e,"&count=").concat(t)).then((function(e){return e.data}))},unfollow:function(e){return te.delete("follow/".concat(e))},follow:function(e){return te.post("follow/".concat(e),{})}},ae=function(){return te.get("auth/me")},se=function(e,t,n){return te.post("auth/login",{email:e,password:t,rememberMe:n})},re=function(){return te.delete("auth/login")},ce=function(e){return te.get("profile/".concat(e))},ie=function(e){return te.get("profile/status/".concat(e))},oe=function(e){return te.put("profile/status",{status:e})},ue=function(e){var t=new FormData;return t.append("image",e),te.put("profile/photo",t,{headers:{"Content-Type":"multipart/form-data"}})},le=function(e){return te.put("profile",e)},de=n(21),je="samurai-JS/auth/SET_USER_DATA",fe="samurai-JS/auth/TOGGLE_IS_FETCHING",pe={id:null,email:null,login:null,isAuth:!1,isFetching:!1},be=function(e,t,n,a){return{type:je,payload:{id:e,email:t,login:n,isAuth:a}}},me=function(){return function(){var e=Object(ee.a)($.a.mark((function e(t){var n,a,s,r,c;return $.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ae();case 2:0===(n=e.sent).data.resultCode&&(a=n.data.data,s=a.id,r=a.email,c=a.login,t(be(s,r,c,!0)));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},he=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:pe,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case je:return Object(b.a)(Object(b.a)({},e),t.payload);case fe:return Object(b.a)(Object(b.a)({},e),{},{isFetching:t.isFetching});default:return e}},Oe=function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(){return Object(o.a)(this,n),t.apply(this,arguments)}return Object(u.a)(n,[{key:"render",value:function(){return Object(D.jsx)(Z,Object(b.a)({},this.props))}}]),n}(r.a.Component),ge=Object(J.b)((function(e){return{isAuth:e.auth.isAuth,login:e.auth.login,isFetching:e.auth.isFetching}}),{userLogOut:function(){return function(){var e=Object(ee.a)($.a.mark((function e(t){return $.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,re();case 2:0===e.sent.data.resultCode&&t(be(null,null,null,!1));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}})(Oe),xe=Object(S.a)({form:"login"})((function(e){var t=e.handleSubmit,n=e.error;return Object(D.jsxs)("form",{onSubmit:t,children:[T("Email","email",F,[U],null),T("Password","password",F,[U],"password"),T(null,"rememberMe",F,[],"checkbox","Remember me"),n&&Object(D.jsx)("div",{className:C.a.formSummaryError,children:n}),Object(D.jsx)("div",{children:Object(D.jsx)("button",{children:"Login"})})]})})),ve=Object(H.d)(Object(J.b)((function(e){return{isAuth:e.auth.isAuth}}),{userLogin:function(e,t,n){return function(){var a=Object(ee.a)($.a.mark((function a(s){var r,c;return $.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,se(e,t,n);case 2:0===(r=a.sent).data.resultCode?s(me()):(c=r.data.messages.length>0?r.data.messages[0]:"Some error",s(Object(de.a)("login",{_error:c})));case 4:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}()}}))((function(e){return e.isAuth?Object(D.jsx)(j.a,{to:"/profile"}):Object(D.jsxs)("div",{children:[Object(D.jsx)("h1",{children:"Login"}),Object(D.jsx)(xe,{onSubmit:function(t){e.userLogin(t.email,t.password,t.rememberMe)}})]})})),_e=n(24),De=n.n(_e),Pe=function(){return Object(D.jsxs)("nav",{className:De.a.nav,children:[Object(D.jsx)("div",{className:"".concat(De.a.item),children:Object(D.jsx)(f.b,{to:"/profile",activeClassName:De.a.activeLink,children:"Profile"})}),Object(D.jsx)("div",{className:"".concat(De.a.item),children:Object(D.jsx)(f.b,{to:"/dialogs",activeClassName:De.a.activeLink,children:"Messages"})}),Object(D.jsx)("div",{className:"".concat(De.a.item),children:Object(D.jsx)(f.b,{to:"/settings",activeClassName:De.a.activeLink,children:"Settings"})}),Object(D.jsx)("div",{className:"".concat(De.a.item," ").concat(De.a.users),children:Object(D.jsx)(f.b,{to:"/users",activeClassName:De.a.activeLink,children:"Find Users"})})]})},ye="ADD_POST",Ne="SET_USER_PROFILE",we="SET_STATUS",Be="DELETE_POST",Se="SAVE_PHOTO_SUCCES",Ie="TOOGLE_EDIT_MODE",ke={postsData:[{id:1,message:"How are you?"},{id:2,message:"It's my first post"},{id:3,message:"It's my second post"},{id:4,message:"It's my 4th post"}],profile:null,status:"",editMode:!1},Ce=function(e){return{type:we,status:e}},Ae=function(e){return{type:Ie,editMode:e}},Ee=function(e){return function(){var t=Object(ee.a)($.a.mark((function t(n){var a;return $.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,ce(e);case 2:a=t.sent,n((s=a.data,{type:Ne,profile:s}));case 4:case"end":return t.stop()}var s}),t)})));return function(e){return t.apply(this,arguments)}}()},Fe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ke,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case ye:return Object(b.a)(Object(b.a)({},e),{},{postsData:[].concat(Object(p.a)(e.postsData),[{id:5,message:t.postText,like:0}])});case Be:return Object(b.a)(Object(b.a)({},e),{},{postsData:e.postsData.filter((function(e){return e.id!=t.postId}))});case Ne:return Object(b.a)(Object(b.a)({},e),{},{profile:t.profile});case we:return Object(b.a)(Object(b.a)({},e),{},{status:t.status});case Se:return Object(b.a)(Object(b.a)({},e),{},{profile:Object(b.a)(Object(b.a)({},e.profile),{},{photos:t.photos})});case Ie:return Object(b.a)(Object(b.a)({},e),{},{editMode:t.editMode});default:return e}},Te=n(95),Ue=n.n(Te),Le=n(58),Me=n.n(Le),ze=n.p+"static/media/profile.5faf09a7.png",Ge=function(e){return Object(D.jsx)("div",{className:Me.a.itemBox,children:Object(D.jsxs)("div",{className:Me.a.itemContent,children:[Object(D.jsx)("div",{className:Me.a.imgBox,children:Object(D.jsx)("img",{src:e.profile.photos.large||ze})}),Object(D.jsx)("div",{className:Me.a.text,children:e.message})]})})},Je=L(70),Re=Object(S.a)({form:"login"})((function(e){return Object(D.jsxs)("form",{onSubmit:e.handleSubmit,children:[Object(D.jsx)("div",{children:Object(D.jsx)(B.a,{name:"postText",component:E,validate:Je})}),Object(D.jsx)("div",{children:Object(D.jsx)("button",{children:"Add Post"})})]})})),He=function(e){return Object(D.jsx)("div",{children:Object(D.jsx)(Re,{onSubmit:function(t){e.addPostBtt(t.postText)}})})},Ve=r.a.memo((function(e){return e.profile?Object(D.jsxs)("div",{className:Ue.a.postBlock,children:[Object(D.jsx)("h3",{children:"My posts"}),Object(D.jsx)("div",{className:Ue.a.posts,children:e.postsData.map((function(t){return Object(D.jsx)(Ge,{message:t.message,profile:e.profile},t.id)}))}),Object(D.jsx)("div",{children:Object(D.jsx)(He,{addPostBtt:e.addPostBtt})})]}):Object(D.jsx)(W,{})})),qe=Object(J.b)((function(e){return{postsData:e.profilePage.postsData,profile:e.profilePage.profile}}),(function(e){return{addPostBtt:function(t){e(function(e){return{type:ye,postText:e}}(t))}}}))(Ve),Ke=n(6),We=n.n(Ke),Ye=n(97),Xe=function(e){var t=Object(s.useState)(!1),n=Object(Ye.a)(t,2),a=n[0],r=n[1],c=Object(s.useState)(e.status),i=Object(Ye.a)(c,2),o=i[0],u=i[1];return Object(s.useEffect)((function(){u(e.status)}),[e.status]),Object(D.jsxs)("div",{className:We.a.status,children:[!a&&Object(D.jsx)("div",{children:Object(D.jsx)("span",{onDoubleClick:e.isOwner&&function(){r(!0)},children:e.status||"NO STATUS"})}),a&&Object(D.jsx)("div",{children:Object(D.jsx)("input",{onChange:function(e){u(e.currentTarget.value)},autoFocus:!0,onBlur:function(){r(!1),e.updateStatus(o)},value:o})})]})},Ze=Object(S.a)({form:"profileForm"})((function(e){var t=e.handleSubmit,n=e.profile;return Object(D.jsxs)("form",{onSubmit:t,className:We.a.infoBlock,children:[Object(D.jsxs)("div",{className:We.a.infoBox,children:["Info",Object(D.jsxs)("div",{className:We.a.infoBoxItem,children:[Object(D.jsx)("span",{className:We.a.key,children:"Full Name: "}),T("Full Name","fullName",F,[],null)]}),Object(D.jsxs)("div",{className:We.a.infoBoxItem,children:[Object(D.jsx)("span",{className:We.a.key,children:"About me: "}),T("About me","aboutMe",F,[],null)]}),Object(D.jsxs)("div",{className:We.a.infoBoxItem,children:[Object(D.jsx)("span",{className:We.a.key,children:"Is Looking For Job: "}),T(null,"lookingForAJob",F,[],"checkBox")]}),Object(D.jsxs)("div",{className:We.a.infoBoxItem,children:[Object(D.jsx)("span",{className:We.a.key,children:"Job status: "}),T("Job status","lookingForAJobDescription",F,[],null)]})]}),Object(D.jsxs)("div",{className:We.a.infoBox,children:["Contacts",Object.keys(n.contacts).map((function(e){return Object(D.jsxs)("div",{className:We.a.contactBoxItem,children:[Object(D.jsxs)("span",{className:We.a.key,children:[e,": "]}),Object(D.jsx)("span",{className:We.a.property,children:T(null,"contacts.".concat(e),F,[],null)})]})}))]})]})})),Qe=function(e){var t=e.profile,n=e.submit,a=e.saveData;return Object(D.jsxs)("div",{className:We.a.a0001,children:[Object(D.jsx)("div",{className:We.a.edit,onClick:function(){n("profileForm")},children:"Submit"}),Object(D.jsx)(Ze,{profile:t,initialValues:t,onSubmit:function(e){a(e)}})]})},$e=function(e){var t=e.profile,n=e.toggleEditMode,a=e.isOwner;return Object(D.jsxs)("div",{className:We.a.a0001,children:[a&&Object(D.jsx)("div",{className:We.a.edit,onClick:function(){n(!0)},children:"Edit Details"}),Object(D.jsxs)("div",{className:We.a.infoBlock,children:[Object(D.jsxs)("div",{className:We.a.infoBox,children:["Info",Object(D.jsxs)("div",{className:We.a.infoBoxItem,children:[Object(D.jsx)("span",{className:We.a.key,children:"Full Name:"}),Object(D.jsxs)("span",{className:We.a.propertyString,children:[" ",t.fullName]})]}),Object(D.jsxs)("div",{className:We.a.infoBoxItem,children:[Object(D.jsx)("span",{className:We.a.key,children:"About me:"}),Object(D.jsxs)("span",{className:We.a.propertyString,children:[" ",t.aboutMe]})]}),Object(D.jsxs)("div",{className:We.a.infoBoxItem,children:[Object(D.jsx)("span",{className:We.a.key,children:"Is Looking For Job:"}),t.lookingForAJob?Object(D.jsx)("span",{className:We.a.property,children:" Yes"}):Object(D.jsx)("span",{className:We.a.property,children:" No"})]}),Object(D.jsxs)("div",{className:We.a.infoBoxItem,children:[Object(D.jsx)("span",{className:We.a.key,children:"Job status:"}),Object(D.jsxs)("span",{className:We.a.propertyString,children:[" ",t.lookingForAJobDescription]})]})]}),Object(D.jsxs)("div",{className:We.a.infoBox,children:["Contacts",Object.keys(t.contacts).map((function(e){return Object(D.jsx)(et,{contactTitle:e,contactValue:t.contacts[e]})}))]})]})]})},et=function(e){var t=e.contactTitle,n=e.contactValue;return Object(D.jsxs)("div",{className:We.a.contactBoxItem,children:[Object(D.jsxs)("span",{className:We.a.key,children:[t,":"]}),Object(D.jsxs)("span",{className:We.a.property,children:[" ",n]})]})},tt=function(e){return Object(D.jsx)(D.Fragment,{children:e.editMode?Object(D.jsx)(Qe,Object(b.a)({},e)):Object(D.jsx)($e,Object(b.a)({},e))})},nt=function(e){var t=e.profile,n=e.status,a=e.updateStatus,s=e.isOwner,r=e.savePhoto,c=e.toggleEditMode,i=e.editMode,o=e.saveData,u=e.submit;if(!t)return Object(D.jsx)(W,{});return Object(D.jsxs)("div",{className:We.a.description,children:[Object(D.jsxs)("div",{className:We.a.imgBox,children:[Object(D.jsx)("img",{className:We.a.ava,src:t.photos.large||ze}),s&&Object(D.jsx)("input",{type:"file",onChange:function(e){e.target.files.length&&r(e.target.files[0])}})]}),Object(D.jsxs)("div",{children:[Object(D.jsx)("div",{className:We.a.name,children:t.fullName}),Object(D.jsx)(Xe,{isOwner:s,status:n,updateStatus:a}),Object(D.jsx)(tt,{profile:t,toggleEditMode:c,isOwner:s,editMode:i,saveData:o,submit:u})]})]})},at=function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(){return Object(o.a)(this,n),t.apply(this,arguments)}return Object(u.a)(n,[{key:"refreshProfile",value:function(){var e=this.props.match.params.userId;e||(e=this.props.authorizedUserId),this.props.getProfileInfo(e),this.props.getStatus(e)}},{key:"componentDidMount",value:function(){this.refreshProfile()}},{key:"componentDidUpdate",value:function(e){this.props.match.params.userId!=e.match.params.userId&&this.refreshProfile()}},{key:"render",value:function(){return Object(D.jsxs)(D.Fragment,{children:[Object(D.jsx)(nt,Object(b.a)(Object(b.a)({},this.props),{},{isOwner:!this.props.match.params.userId})),Object(D.jsx)(qe,{})]})}}]),n}(r.a.Component),st=Object(H.d)(R.a,j.f,Object(J.b)((function(e){return{profile:e.profilePage.profile,status:e.profilePage.status,authorizedUserId:e.auth.id,isAuth:e.auth.isAuth,editMode:e.profilePage.editMode}}),{submit:de.b,getProfileInfo:Ee,getStatus:function(e){return function(){var t=Object(ee.a)($.a.mark((function t(n){var a;return $.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,ie(e);case 2:a=t.sent,n(Ce(a.data));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},updateStatus:function(e){return function(){var t=Object(ee.a)($.a.mark((function t(n){return $.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,oe(e);case 2:0===t.sent.data.resultCode&&n(Ce(e));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},savePhoto:function(e){return function(){var t=Object(ee.a)($.a.mark((function t(n){var a;return $.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,ue(e);case 2:0===(a=t.sent).data.resultCode&&n((s=a.data.data.photos,{type:Se,photos:s}));case 4:case"end":return t.stop()}var s}),t)})));return function(e){return t.apply(this,arguments)}}()},toggleEditMode:Ae,saveData:function(e){return function(){var t=Object(ee.a)($.a.mark((function t(n,a){var s,r;return $.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return s=a().auth.id,t.next=3,le(e);case 3:0===(r=t.sent).data.resultCode?(n(Ee(s)),n(Ae(!1))):n(Object(de.a)("profileData",{_error:r.data.messages[0]}));case 5:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()}}))(at),rt=function(e,t,n,a){return e.map((function(e){return e[n]===t?Object(b.a)(Object(b.a)({},e),a):e}))},ct="FOLLOW",it="UNFOLLOW",ot="SET_USERS",ut="SET_CURRENT_PAGE",lt="SET_USERS_COUNT",dt="TOGGLE_IS_FETCHING",jt="TOGGLE_IS_FOLLOWING_PROGRESS",ft={users:[],pageSize:13,totalUsersCount:0,currentPage:1,isFetching:!1,followingInProgress:[],portionSize:10},pt=function(e){return{type:ct,userId:e}},bt=function(e){return{type:it,userId:e}},mt=function(e){return{type:ut,currentPage:e}},ht=function(e){return{type:dt,isFetching:e}},Ot=function(e,t){return{type:jt,followingInProgress:e,userId:t}},gt=function(){var e=Object(ee.a)($.a.mark((function e(t,n,a,s){return $.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t(Ot(!0,n)),e.next=3,a(n);case 3:0===e.sent.data.resultCode&&t(s(n)),t(Ot(!1,n));case 6:case"end":return e.stop()}}),e)})));return function(t,n,a,s){return e.apply(this,arguments)}}(),xt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ft,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case ct:return Object(b.a)(Object(b.a)({},e),{},{users:rt(e.users,t.userId,"id",{followed:!0})});case it:return Object(b.a)(Object(b.a)({},e),{},{users:rt(e.users,t.userId,"id",{followed:!1})});case ot:return Object(b.a)(Object(b.a)({},e),{},{users:t.users});case ut:return Object(b.a)(Object(b.a)({},e),{},{currentPage:t.currentPage});case lt:return Object(b.a)(Object(b.a)({},e),{},{totalUsersCount:t.totalUsers});case dt:return Object(b.a)(Object(b.a)({},e),{},{isFetching:t.isFetching});case jt:return Object(b.a)(Object(b.a)({},e),{},{followingInProgress:t.followingInProgress?[].concat(Object(p.a)(e.followingInProgress),[t.userId]):e.followingInProgress.filter((function(e){return e!=t.userId}))});default:return e}},vt=n(96),_t=n.n(vt),Dt=function(e){var t=e.totalItemsCount,n=e.pageSize,a=e.currentPage,s=e.onPageChanged,r=Math.ceil(t/n),c=a-1;c=c<1?null:c;var i=a+1;return i=i>=r?null:i,Object(D.jsx)("div",{className:_t.a.paginator,children:Object(D.jsxs)("div",{children:[1===a?null:Object(D.jsxs)(D.Fragment,{children:[Object(D.jsx)("span",{onClick:function(){s(1)},children:1}),Object(D.jsx)("span",{children:"..."})]}),Object(D.jsx)("span",{onClick:function(){s(c)},children:a<3?null:Object(D.jsx)("span",{children:c})}),Object(D.jsxs)("span",{children:[a<3?null:Object(D.jsx)("span",{children:".."}),Object(D.jsx)("span",{className:_t.a.selectedPage,children:a}),a>r-2?null:Object(D.jsx)("span",{children:".."})]}),Object(D.jsx)("span",{onClick:function(){s(i)},children:i}),a===r?null:Object(D.jsxs)(D.Fragment,{children:[Object(D.jsx)("span",{children:"..."}),Object(D.jsx)("span",{onClick:function(){s(r)},children:r})]})]})})},Pt=n(135),yt=n.n(Pt),Nt=function(e){var t=e.user,n=e.followingInProgress,a=e.unfollow,s=e.follow;return Object(D.jsxs)("div",{children:[Object(D.jsx)("div",{children:Object(D.jsx)(f.b,{to:"/profile/".concat(t.id),children:Object(D.jsx)("img",{src:null!=t.photos.small?t.photos.small:"https://www.pavilionweb.com/wp-content/uploads/2017/03/man-300x300.png",className:yt.a.userPhoto})})}),Object(D.jsx)("div",{children:t.followed?Object(D.jsx)("button",{disabled:n.some((function(e){return e===t.id})),onClick:function(){a(t.id)},children:"Unfollow"}):Object(D.jsx)("button",{disabled:n.some((function(e){return e===t.id})),onClick:function(){s(t.id)},children:"Follow"})}),Object(D.jsx)("div",{children:t.name}),Object(D.jsx)("div",{children:t.status})]})},wt=function(e){var t=e.currentPage,n=e.totalUsersCount,a=e.pageSize,s=e.onPageChanged,r=e.users,c=e.portionSize,i=Object(I.a)(e,["currentPage","totalUsersCount","pageSize","onPageChanged","users","portionSize"]);return Object(D.jsxs)("div",{children:[Object(D.jsx)(Dt,{currentPage:t,onPageChanged:s,totalItemsCount:n,pageSize:a,portionSize:c}),r.map((function(e){return Object(D.jsx)(Nt,{user:e,followingInProgress:i.followingInProgress,unfollow:i.unfollow,follow:i.follow},e.id)}))]})},Bt=n(136),St=Object(Bt.a)((function(e){return e.usersPage.users}),(function(e){return e.filter((function(e){return!0}))})),It=function(e){return e.usersPage.pageSize},kt=function(e){return e.usersPage.totalUsersCount},Ct=function(e){return e.usersPage.currentPage},At=function(e){return e.usersPage.isFetching},Et=function(e){return e.usersPage.followingInProgress},Ft=function(e){return e.usersPage.portionSize},Tt=function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(o.a)(this,n);for(var a=arguments.length,s=new Array(a),r=0;r<a;r++)s[r]=arguments[r];return(e=t.call.apply(t,[this].concat(s))).onPageChanged=function(t){e.props.setCurrentPage(t),e.props.getUsers(t,e.props.pageSize)},e}return Object(u.a)(n,[{key:"componentDidMount",value:function(){this.props.getUsers(this.props.currentPage,this.props.pageSize)}},{key:"render",value:function(){return Object(D.jsx)(D.Fragment,{children:this.props.isFetching?Object(D.jsx)(W,{}):Object(D.jsx)(wt,{totalUsersCount:this.props.totalUsersCount,pageSize:this.props.pageSize,portionSize:this.props.portionSize,currentPage:this.props.currentPage,onPageChanged:this.onPageChanged,users:this.props.users,follow:this.props.follow,unfollow:this.props.unfollow,followingInProgress:this.props.followingInProgress})})}}]),n}(r.a.Component),Ut=Object(H.d)(Object(J.b)((function(e){return{users:St(e),pageSize:It(e),totalUsersCount:kt(e),currentPage:Ct(e),isFetching:At(e),followingInProgress:Et(e),portionSize:Ft(e)}}),{follow:function(e){return function(){var t=Object(ee.a)($.a.mark((function t(n){return $.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:gt(n,e,ne.follow.bind(e),pt);case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},unfollow:function(e){return function(){var t=Object(ee.a)($.a.mark((function t(n){return $.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:gt(n,e,ne.unfollow.bind(e),bt);case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},setCurrentPage:mt,getUsers:function(e,t){return function(){var n=Object(ee.a)($.a.mark((function n(a){var s;return $.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return a(ht(!0)),a(mt(e)),n.next=4,ne.getUsers(e,t);case 4:s=n.sent,a(ht(!1)),a((c=s.items,{type:ot,users:c})),a((r=s.totalCount,{type:lt,totalUsers:r}));case 8:case"end":return n.stop()}var r,c}),n)})));return function(e){return n.apply(this,arguments)}}()}}))(Tt),Lt="INITIALIZED_SUCCESS",Mt={initialized:!1},zt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Mt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Lt:return Object(b.a)(Object(b.a)({},e),{},{initialized:!0});default:return e}},Gt={friendsData:[{name:"Dima",img:"https://meragor.com/files/styles//ava_800_800_wm/standoff_162.jpg"},{name:"Andrey",img:"https://avatars.mds.yandex.net/get-zen_doc/3512693/pub_5efb3ff066fe1d5006536937_5efb4be4cdd4d637ce0fd2e8/scale_1200"},{name:"Maxim",img:"https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcTn8H3mqnU943_lgdPtj-JIGRjyKAlp3FSLzg&usqp=CAU"}]},Jt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Gt;return e},Rt=n(137),Ht=n(129),Vt=Object(H.c)({dialogsPage:O,profilePage:Fe,sidebar:Jt,usersPage:xt,auth:he,form:Ht.a,app:zt}),qt=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||H.d,Kt=Object(H.e)(Vt,qt(Object(H.a)(Rt.a)));window.__store__=Kt;var Wt=Kt,Yt=function(e){return function(t){return Object(D.jsx)(D.Fragment,{children:Object(D.jsx)(s.Suspense,{fallback:Object(D.jsx)(W,{}),children:Object(D.jsx)(e,Object(b.a)({},t))})})}},Xt=r.a.lazy((function(){return n.e(3).then(n.bind(null,293))})),Zt=function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(){return Object(o.a)(this,n),t.apply(this,arguments)}return Object(u.a)(n,[{key:"componentDidMount",value:function(){this.props.initializeApp()}},{key:"render",value:function(){return this.props.initialized?Object(D.jsxs)("div",{className:"app-wrapper",children:[Object(D.jsx)(ge,{}),Object(D.jsxs)("div",{className:"all-info-page",children:[Object(D.jsx)(Pe,{}),Object(D.jsxs)("div",{className:"contextBox",children:[Object(D.jsx)(j.b,{path:"/dialogs",render:function(){return Object(D.jsx)(V,{})}}),Object(D.jsx)(j.b,{path:"/profile/:userId?",render:function(){return Object(D.jsx)(st,{})}}),Object(D.jsx)(j.b,{path:"/settings",render:Yt(Xt)}),Object(D.jsx)(j.b,{path:"/users",render:function(){return Object(D.jsx)(Ut,{})}}),Object(D.jsx)(j.b,{path:"/login",render:function(){return Object(D.jsx)(ve,{})}})]})]})]}):Object(D.jsx)(W,{})}}]),n}(s.Component),Qt=Object(H.d)(j.f,Object(J.b)((function(e){return{initialized:e.app.initialized}}),{initializeApp:function(){return function(e){var t=e(me());Promise.all([t]).then((function(){e({type:Lt})}))}}}))(Zt),$t=function(e){return Object(D.jsx)(r.a.StrictMode,{children:Object(D.jsx)(f.a,{children:Object(D.jsx)(J.a,{store:Wt,children:Object(D.jsx)(Qt,{})})})})};i.a.render(Object(D.jsx)($t,{}),document.getElementById("root")),a()},48:function(e,t,n){"use strict";n.d(t,"a",(function(){return p}));var a=n(3),s=n(27),r=n(28),c=n(30),i=n(29),o=n(1),u=n.n(o),l=n(13),d=n(11),j=n(0),f=function(e){return{isAuth:e.auth.isAuth}},p=function(e){var t=function(t){Object(c.a)(o,t);var n=Object(i.a)(o);function o(){return Object(s.a)(this,o),n.apply(this,arguments)}return Object(r.a)(o,[{key:"render",value:function(){return this.props.isAuth?Object(j.jsx)(e,Object(a.a)({},this.props)):Object(j.jsx)(d.a,{to:"/login"})}}]),o}(u.a.Component);return Object(l.b)(f)(t)}},53:function(e,t,n){e.exports={formControl:"FormsControl_formControl__3c4w2",err:"FormsControl_err__A2dut",formSummaryError:"FormsControl_formSummaryError__JSrAT"}},56:function(e,t,n){e.exports={dialogs:"Dialogs_dialogs__35PTw",dialogsItems:"Dialogs_dialogsItems__1LdbS",addBlock:"Dialogs_addBlock__i-3rP"}},57:function(e,t,n){e.exports={dialog:"DialogItem_dialog__28SWE",item:"DialogItem_item__1tDvT",name:"DialogItem_name__Jg0N_",activeLink:"DialogItem_activeLink__Dlkmc"}},58:function(e,t,n){e.exports={itemBox:"Post_itemBox__2J8Mx",itemContent:"Post_itemContent__qLEcN",imgBox:"Post_imgBox__3E9VG",text:"Post_text__1Gw6X"}},6:function(e,t,n){e.exports={description:"ProfileInfo_description__dIfKa",imgBox:"ProfileInfo_imgBox__10WHV",ava:"ProfileInfo_ava__3A2Or",name:"ProfileInfo_name__3J0j-",status:"ProfileInfo_status__3QP5Y",a0001:"ProfileInfo_a0001__IGcPV",edit:"ProfileInfo_edit__1JZbG",infoBlock:"ProfileInfo_infoBlock__te5So",infoBox:"ProfileInfo_infoBox__14u83",infoBoxItem:"ProfileInfo_infoBoxItem__2Tu06",contactBoxItem:"ProfileInfo_contactBoxItem__1Hxns",key:"ProfileInfo_key__12JgN",property:"ProfileInfo_property__7YOSF",propertyString:"ProfileInfo_propertyString__3VxKN"}},72:function(e,t,n){e.exports={header:"Header_header__1aDUx",loginBlock:"Header_loginBlock__3SCHH"}},95:function(e,t,n){e.exports={postBlock:"MyPosts_postBlock__15PaX"}},96:function(e,t,n){e.exports={selectedPage:"Pagination_selectedPage__2ynfE",paginator:"Pagination_paginator__1DnLe",pageNumber:"Pagination_pageNumber__1D9IR"}}},[[291,1,2]]]);
//# sourceMappingURL=main.4842b773.chunk.js.map